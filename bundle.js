!function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(s)return s(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return o(i||t)},c,c.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,i){"use strict";function n(t){o.call(this,t);var e=t.getAlign();this._x.set(e[0]),this._y.set(e[1]),this._z.set(e[2])}var o=t("./Position");n.prototype.toString=function(){return"Align"},n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.update=function(){this._node.setAlign(this._x.get(),this._y.get(),this._z.get()),this._checkUpdate()},n.prototype.onUpdate=n.prototype.update,e.exports=n},{"./Position":5}],2:[function(t,e,i){"use strict";function n(t){this._node=t,this._projectionType=n.ORTHOGRAPHIC_PROJECTION,this._focalDepth=0,this._near=0,this._far=0,this._requestingUpdate=!1,this._id=t.addComponent(this),this._viewTransform=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._viewDirty=!1,this._perspectiveDirty=!1,this.setFlat()}var o=t("../core/Commands");n.FRUSTUM_PROJECTION=0,n.PINHOLE_PROJECTION=1,n.ORTHOGRAPHIC_PROJECTION=2,n.prototype.toString=function(){return"Camera"},n.prototype.getValue=function(){return{component:this.toString(),projectionType:this._projectionType,focalDepth:this._focalDepth,near:this._near,far:this._far}},n.prototype.setValue=function(t){return this.toString()===t.component&&(this.set(t.projectionType,t.focalDepth,t.near,t.far),!0)},n.prototype.set=function(t,e,i,n){this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._projectionType=t,this._focalDepth=e,this._near=i,this._far=n},n.prototype.setDepth=function(t){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._perspectiveDirty=!0,this._projectionType=n.PINHOLE_PROJECTION,this._focalDepth=t,this._near=0,this._far=0,this},n.prototype.setFrustum=function(t,e){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._perspectiveDirty=!0,this._projectionType=n.FRUSTUM_PROJECTION,this._focalDepth=0,this._near=t,this._far=e,this},n.prototype.setFlat=function(){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._perspectiveDirty=!0,this._projectionType=n.ORTHOGRAPHIC_PROJECTION,this._focalDepth=0,this._near=0,this._far=0,this},n.prototype.onUpdate=function(){this._requestingUpdate=!1;var t=this._node.getLocation();if(this._node.sendDrawCommand(o.WITH).sendDrawCommand(t),this._perspectiveDirty)switch(this._perspectiveDirty=!1,this._projectionType){case n.FRUSTUM_PROJECTION:this._node.sendDrawCommand(o.FRUSTRUM_PROJECTION),this._node.sendDrawCommand(this._near),this._node.sendDrawCommand(this._far);break;case n.PINHOLE_PROJECTION:this._node.sendDrawCommand(o.PINHOLE_PROJECTION),this._node.sendDrawCommand(this._focalDepth);break;case n.ORTHOGRAPHIC_PROJECTION:this._node.sendDrawCommand(o.ORTHOGRAPHIC_PROJECTION)}this._viewDirty&&(this._viewDirty=!1,this._node.sendDrawCommand(o.CHANGE_VIEW_TRANSFORM),this._node.sendDrawCommand(this._viewTransform[0]),this._node.sendDrawCommand(this._viewTransform[1]),this._node.sendDrawCommand(this._viewTransform[2]),this._node.sendDrawCommand(this._viewTransform[3]),this._node.sendDrawCommand(this._viewTransform[4]),this._node.sendDrawCommand(this._viewTransform[5]),this._node.sendDrawCommand(this._viewTransform[6]),this._node.sendDrawCommand(this._viewTransform[7]),this._node.sendDrawCommand(this._viewTransform[8]),this._node.sendDrawCommand(this._viewTransform[9]),this._node.sendDrawCommand(this._viewTransform[10]),this._node.sendDrawCommand(this._viewTransform[11]),this._node.sendDrawCommand(this._viewTransform[12]),this._node.sendDrawCommand(this._viewTransform[13]),this._node.sendDrawCommand(this._viewTransform[14]),this._node.sendDrawCommand(this._viewTransform[15]))},n.prototype.onTransformChange=function(t){var e=t;this._viewDirty=!0,this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0);var i=e[0],n=e[1],o=e[2],s=e[3],r=e[4],a=e[5],h=e[6],u=e[7],c=e[8],p=e[9],l=e[10],d=e[11],f=e[12],m=e[13],g=e[14],_=e[15],y=i*a-n*r,v=i*h-o*r,b=i*u-s*r,T=n*h-o*a,E=n*u-s*a,w=o*u-s*h,S=c*m-p*f,C=c*g-l*f,I=c*_-d*f,O=p*g-l*m,R=p*_-d*m,N=l*_-d*g,A=1/(y*N-v*R+b*O+T*I-E*C+w*S);this._viewTransform[0]=(a*N-h*R+u*O)*A,this._viewTransform[1]=(o*R-n*N-s*O)*A,this._viewTransform[2]=(m*w-g*E+_*T)*A,this._viewTransform[3]=(l*E-p*w-d*T)*A,this._viewTransform[4]=(h*I-r*N-u*C)*A,this._viewTransform[5]=(i*N-o*I+s*C)*A,this._viewTransform[6]=(g*b-f*w-_*v)*A,this._viewTransform[7]=(c*w-l*b+d*v)*A,this._viewTransform[8]=(r*R-a*I+u*S)*A,this._viewTransform[9]=(n*I-i*R-s*S)*A,this._viewTransform[10]=(f*E-m*b+_*y)*A,this._viewTransform[11]=(p*b-c*E-d*y)*A,this._viewTransform[12]=(a*C-r*O-h*S)*A,this._viewTransform[13]=(i*O-n*C+o*S)*A,this._viewTransform[14]=(m*v-f*T-g*y)*A,this._viewTransform[15]=(c*T-p*v+l*y)*A},e.exports=n},{"../core/Commands":9}],3:[function(t,e,i){"use strict";function n(t,e){this.node=t,this.id=t.addComponent(this),this._events=new h,this.last1=new u,this.last2=new u,this.delta1=new u,this.delta2=new u,this.velocity1=new u,this.velocity2=new u,this.dist=0,this.diff12=new u,this.center=new u,this.centerDelta=new u,this.centerVelocity=new u,this.pointer1={position:this.last1,delta:this.delta1,velocity:this.velocity1},this.pointer2={position:this.last2,delta:this.delta2,velocity:this.velocity2},this.event={status:null,time:0,pointers:[],center:this.center,centerDelta:this.centerDelta,centerVelocity:this.centerVelocity,points:0,current:0},this.trackedPointerIDs=[-1,-1],this.timeOfPointer=0,this.multiTap=0,this.mice=[],this.gestures=[],this.options={},this.trackedGestures={};var i,n;if(e)for(i=0,n=e.length;i<n;i++)this.on(e[i],e[i].callback);t.addUIEvent("touchstart"),t.addUIEvent("mousedown"),t.addUIEvent("touchmove"),t.addUIEvent("mousemove"),t.addUIEvent("touchend"),t.addUIEvent("mouseup"),t.addUIEvent("mouseleave")}function o(t){var e;if(t.targetTouches?e=t.targetTouches:(this.mice[0]=t,e=this.mice,t.identifier=1),!e[0]||!e[1]||this.trackedPointerIDs[0]!==e[0].identifier||this.trackedPointerIDs[1]!==e[1].identifier){this.event.time=Date.now();var i,n;this.trackedPointerIDs[0]!==e[0].identifier&&(this.trackedGestures.tap&&(i=this.options.tap&&this.options.tap.threshold||250,this.event.time-this.timeOfPointer<i?this.event.taps++:this.event.taps=1,this.timeOfPointer=this.event.time,this.multiTap=1),this.event.current=1,this.event.points=1,n=e[0].identifier,this.trackedPointerIDs[0]=n,this.last1.set(e[0].pageX,e[0].pageY),this.velocity1.clear(),this.delta1.clear(),this.event.pointers.push(this.pointer1)),e[1]&&this.trackedPointerIDs[1]!==e[1].identifier&&(this.trackedGestures.tap&&(i=this.options.tap&&this.options.tap.threshold||250,this.event.time-this.timeOfPointer<i&&(this.multiTap=2)),this.event.current=2,this.event.points=2,n=e[1].identifier,this.trackedPointerIDs[1]=n,this.last2.set(e[1].pageX,e[1].pageY),this.velocity2.clear(),this.delta2.clear(),u.add(this.last1,this.last2,this.center).scale(.5),this.centerDelta.clear(),this.centerVelocity.clear(),u.subtract(this.last2,this.last1,this.diff12),this.dist=this.diff12.length(),this.trackedGestures.pinch&&(this.event.scale=this.event.scale||1,this.event.scaleDelta=0,this.event.scaleVelocity=0),this.trackedGestures.rotate&&(this.event.rotation=this.event.rotation||0,this.event.rotationDelta=0,this.event.rotationVelocity=0),this.event.pointers.push(this.pointer2)),this.event.status="start",1===this.event.points&&(this.center.copy(this.last1),this.centerDelta.clear(),this.centerVelocity.clear(),this.trackedGestures.pinch&&(this.event.scale=1,this.event.scaleDelta=0,this.event.scaleVelocity=0),this.trackedGestures.rotate&&(this.event.rotation=0,this.event.rotationDelta=0,this.event.rotationVelocity=0)),this.triggerGestures()}}function s(t){var e;if(t.targetTouches)e=t.targetTouches;else{if(!this.event.current)return;this.mice[0]=t,e=this.mice,t.identifier=1}var i=Date.now(),n=i-this.event.time;if(0!==n){var o=1e3/n;if(this.event.time=i,this.event.current=1,this.event.points=1,this.trackedPointerIDs[0]===e[0].identifier&&(c.set(e[0].pageX,e[0].pageY),u.subtract(c,this.last1,this.delta1),u.scale(this.delta1,o,this.velocity1),this.last1.copy(c)),e[1]){if(this.event.current=2,this.event.points=2,c.set(e[1].pageX,e[1].pageY),u.subtract(c,this.last2,this.delta2),u.scale(this.delta2,o,this.velocity2),this.last2.copy(c),u.add(this.last1,this.last2,c).scale(.5),u.subtract(c,this.center,this.centerDelta),u.add(this.velocity1,this.velocity2,this.centerVelocity).scale(.5),this.center.copy(c),u.subtract(this.last2,this.last1,c),this.trackedGestures.rotate){var s=c.dot(this.diff12),r=c.cross(this.diff12),a=-Math.atan2(r,s);this.event.rotation+=a,this.event.rotationDelta=a,this.event.rotationVelocity=a*o}var h=c.length(),p=h/this.dist;this.diff12.copy(c),this.dist=h,this.trackedGestures.pinch&&(this.event.scale*=p,p-=1,this.event.scaleDelta=p,this.event.scaleVelocity=p*o)}this.event.status="move",1===this.event.points&&(this.center.copy(this.last1),this.centerDelta.copy(this.delta1),this.centerVelocity.copy(this.velocity1),this.trackedGestures.pinch&&(this.event.scale=1,this.event.scaleDelta=0,this.event.scaleVelocity=0),this.trackedGestures.rotate&&(this.event.rotation=0,this.event.rotationDelta=0,this.event.rotationVelocity=0)),this.triggerGestures()}}function r(t){var e;if(t.targetTouches)e=t.targetTouches;else{if(!this.event.current)return;this.mice.pop(),e=this.mice}if(!e[0]||!e[1]||this.trackedPointerIDs[0]!==e[0].identifier||this.trackedPointerIDs[1]!==e[1].identifier){var i;if(this.event.status="end",!e[0])return this.event.current=0,this.trackedPointerIDs[0]=-1,this.trackedPointerIDs[1]=-1,this.triggerGestures(),this.event.pointers.pop(),void this.event.pointers.pop();this.trackedPointerIDs[0]!==e[0].identifier&&(this.trackedPointerIDs[0]=-1,i=e[0].identifier,this.trackedPointerIDs[0]=i,this.last1.set(e[0].pageX,e[0].pageY),this.velocity1.clear(),this.delta1.clear()),e[1]?this.trackedPointerIDs[1]!==e[1].identifier&&(this.trackedPointerIDs[1]=-1,this.event.points=2,i=e[1].identifier,this.trackedPointerIDs[1]=i,this.last2.set(e[1].pageX,e[1].pageY),this.velocity2.clear(),this.delta2.clear(),u.add(this.last1,this.last2,this.center).scale(.5),this.centerDelta.clear(),this.centerVelocity.clear(),u.subtract(this.last2,this.last1,this.diff12),this.dist=this.diff12.length()):(this.event.current=1,this.trackedPointerIDs[1]=-1,this.triggerGestures(),this.event.points=1,this.event.pointers.pop())}}function a(){this.event.current&&(this.event.status="end",this.event.current=0,this.trackedPointerIDs[0]=-1,this.triggerGestures(),this.event.pointers.pop())}var h=t("../utilities/CallbackStore"),u=t("../math/Vec2"),c=new u,p={drag:!0,tap:!0,rotate:!0,pinch:!0};n.prototype.onReceive=function(t,e){switch(t){case"touchstart":case"mousedown":o.call(this,e);break;case"touchmove":case"mousemove":s.call(this,e);break;case"touchend":case"mouseup":r.call(this,e);break;case"mouseleave":a.call(this,e)}},n.prototype.toString=function(){return"GestureHandler"},n.prototype.on=function(t,e){var i=t.event||t;p[i]&&(this.trackedGestures[i]=!0,this.gestures.push(i),t.event&&(this.options[i]=t),this._events.on(i,e))},n.prototype.triggerGestures=function(){for(var t=this.event,e=0,i=this.gestures.length;e<i;e++){var n=this.gestures[e];switch(n){case"rotate":case"pinch":2===t.points&&this.trigger(n,t);break;case"tap":if("start"===t.status)if(this.options.tap){var o=this.options.tap.points||1;this.multiTap>=o&&t.points>=o&&this.trigger(n,t)}else this.trigger(n,t);break;default:this.trigger(n,t)}}},n.prototype.trigger=function(t,e){this._events.trigger(t,e)},e.exports=n},{"../math/Vec2":36,"../utilities/CallbackStore":46}],4:[function(t,e,i){"use strict";function n(t){this._node=t,this._id=t.addComponent(this),this._value=new o(1),this._requestingUpdate=!1}var o=t("../transitions/Transitionable");n.prototype.toString=function(){return"Opacity"},n.prototype.getValue=function(){return{component:this.toString(),value:this._value.get()}},n.prototype.setValue=function(t){return this.toString()===t.component&&(this.set(t.value),!0)},n.prototype.set=function(t,e,i){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._value.set(t,e,i),this},n.prototype.get=function(){return this._value.get()},n.prototype.halt=function(){return this._value.halt(),this},n.prototype.isActive=function(){return this._value.isActive()},n.prototype.update=function(){this._node.setOpacity(this._value.get()),this._value.isActive()?this._node.requestUpdateOnNextTick(this._id):this._requestingUpdate=!1},n.prototype.onUpdate=n.prototype.update,e.exports=n},{"../transitions/Transitionable":45}],5:[function(t,e,i){"use strict";function n(t){this._node=t,this._id=t.addComponent(this),this._requestingUpdate=!1;var e=t.getPosition();this._x=new o(e[0]),this._y=new o(e[1]),this._z=new o(e[2])}var o=t("../transitions/Transitionable");n.prototype.toString=function(){return"Position"},n.prototype.getValue=function(){return{component:this.toString(),x:this._x.get(),y:this._y.get(),z:this._z.get()}},n.prototype.setValue=function(t){return this.toString()===t.component&&(this.set(t.x,t.y,t.z),!0)},n.prototype.getX=function(){return this._x.get()},n.prototype.getY=function(){return this._y.get()},n.prototype.getZ=function(){return this._z.get()},n.prototype.isActive=function(){return this._x.isActive()||this._y.isActive()||this._z.isActive()},n.prototype._checkUpdate=function(){this.isActive()?this._node.requestUpdateOnNextTick(this._id):this._requestingUpdate=!1},n.prototype.update=function(){this._node.setPosition(this._x.get(),this._y.get(),this._z.get()),this._checkUpdate()},n.prototype.onUpdate=n.prototype.update,n.prototype.setX=function(t,e,i){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._x.set(t,e,i),this},n.prototype.setY=function(t,e,i){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._y.set(t,e,i),this},n.prototype.setZ=function(t,e,i){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._z.set(t,e,i),this},n.prototype.set=function(t,e,i,n,o){this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0);var s,r,a;return null!=i?a=o:null!=e?r=o:null!=t&&(s=o),null!=t&&this._x.set(t,n,s),null!=e&&this._y.set(e,n,r),null!=i&&this._z.set(i,n,a),this},n.prototype.halt=function(){return this._x.halt(),this._y.halt(),this._z.halt(),this},e.exports=n},{"../transitions/Transitionable":45}],6:[function(t,e,i){"use strict";function n(t){o.call(this,t),this._x.set(1),this._y.set(1),this._z.set(1)}var o=t("./Position");n.prototype.toString=function(){return"Scale"},n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.update=function(){this._node.setScale(this._x.get(),this._y.get(),this._z.get()),this._checkUpdate()},n.prototype.onUpdate=n.prototype.update,e.exports=n},{"./Position":5}],7:[function(t,e,i){"use strict";function n(){"undefined"!=typeof self&&self.window!==self&&this._enterWorkerMode()}n.prototype._enterWorkerMode=function(){this._workerMode=!0;var t=this;self.addEventListener("message",function(e){t.onMessage(e.data)})},n.prototype.onMessage=null,n.prototype.sendMessage=function(t){this._workerMode?self.postMessage(t):this.onmessage(t)},n.prototype.onmessage=null,n.prototype.postMessage=function(t){return this.onMessage(t)},e.exports=n},{}],8:[function(t,e,i){"use strict";function n(){this._time=0,this._frame=0,this._timerQueue=[],this._updatingIndex=0,this._scale=1,this._scaledTime=this._time}n.prototype.setScale=function(t){return this._scale=t,this},n.prototype.getScale=function(){return this._scale},n.prototype.step=function(t){this._frame++,this._scaledTime=this._scaledTime+(t-this._time)*this._scale,this._time=t;for(var e=0;e<this._timerQueue.length;e++)this._timerQueue[e](this._scaledTime)&&this._timerQueue.splice(e,1);return this},n.prototype.now=function(){return this._scaledTime},n.prototype.getTime=n.prototype.now,n.prototype.getFrame=function(){return this._frame},n.prototype.setTimeout=function(t,e){var i=Array.prototype.slice.call(arguments,2),n=this._time,o=function(o){return o-n>=e&&(t.apply(null,i),!0)};return this._timerQueue.push(o),o},n.prototype.setInterval=function(t,e){var i=Array.prototype.slice.call(arguments,2),n=this._time,o=function(o){return o-n>=e&&(t.apply(null,i),n=o),!1};return this._timerQueue.push(o),o},n.prototype.clearTimer=function(t){var e=this._timerQueue.indexOf(t);return-1!==e&&this._timerQueue.splice(e,1),this},e.exports=n},{}],9:[function(t,e,i){"use strict";var n={INIT_DOM:0,DOM_RENDER_SIZE:1,CHANGE_TRANSFORM:2,CHANGE_SIZE:3,CHANGE_PROPERTY:4,CHANGE_CONTENT:5,CHANGE_ATTRIBUTE:6,ADD_CLASS:7,REMOVE_CLASS:8,SUBSCRIBE:9,GL_SET_DRAW_OPTIONS:10,GL_AMBIENT_LIGHT:11,GL_LIGHT_POSITION:12,GL_LIGHT_COLOR:13,MATERIAL_INPUT:14,GL_SET_GEOMETRY:15,GL_UNIFORMS:16,GL_BUFFER_DATA:17,GL_CUTOUT_STATE:18,GL_MESH_VISIBILITY:19,GL_REMOVE_MESH:20,PINHOLE_PROJECTION:21,ORTHOGRAPHIC_PROJECTION:22,CHANGE_VIEW_TRANSFORM:23,WITH:24,FRAME:25,ENGINE:26,START:27,STOP:28,TIME:29,TRIGGER:30,NEED_SIZE_FOR:31,DOM:32,READY:33,ALLOW_DEFAULT:34,PREVENT_DEFAULT:35};e.exports=n},{}],10:[function(t,e,i){"use strict";function n(){this._nodes={},this._queue=[]}function o(t,e){e.length=0;var i,n=0,o=t.length;for(i=0;i<o;i++)"/"===t[i]&&(e.push(t.substring(n,i)),n=i+1);return i-n>0&&e.push(t.substring(n,i)),e}var s=t("./Event"),r=t("./Path");n.prototype._setUpdater=function(t){this._updater=t;for(var e in this._nodes)this._nodes[e]._setUpdater(t)},n.prototype.addChildrenToQueue=function(t){for(var e,i=t.getChildren(),n=0,o=i.length;n<o;n++)(e=i[n])&&this._queue.push(e)},n.prototype.next=function(){return this._queue.shift()},n.prototype.breadthFirstNext=function(){var t=this._queue.shift();if(t)return this.addChildrenToQueue(t),t},n.prototype.mount=function(t,e){if(!e)throw new Error("Dispatch: no node passed to mount at: "+t);if(this._nodes[t])throw new Error("Dispatch: there is a node already registered at: "+t);e._setUpdater(this._updater),this._nodes[t]=e;var i=r.parent(t),n=i?this._nodes[i]:e;if(!n)throw new Error("Parent to path: "+t+" doesn't exist at expected path: "+i);var o,s,a=e.getChildren(),h=e.getComponents();if(n.isMounted()&&e._setMounted(!0,t),n.isShown()&&e._setShown(!0),n.isMounted()){for(e._setParent(n),e.onMount&&e.onMount(t),o=0,s=h.length;o<s;o++)h[o]&&h[o].onMount&&h[o].onMount(e,o);for(o=0,s=a.length;o<s;o++)a[o]&&a[o].mount?a[o].mount(t+"/"+o):a[o]&&this.mount(t+"/"+o,a[o])}if(n.isShown())for(e.onShow&&e.onShow(),o=0,s=h.length;o<s;o++)h[o]&&h[o].onShow&&h[o].onShow()},n.prototype.dismount=function(t){var e=this._nodes[t];if(!e)throw new Error("No node registered to path: "+t);var i,n,o=e.getChildren(),s=e.getComponents();if(e.isShown())for(e._setShown(!1),e.onHide&&e.onHide(),i=0,n=s.length;i<n;i++)s[i]&&s[i].onHide&&s[i].onHide();if(e.isMounted()){for(e.onDismount&&e.onDismount(t),i=0,n=o.length;i<n;i++)o[i]&&o[i].dismount?o[i].dismount():o[i]&&this.dismount(t+"/"+i);for(i=0,n=s.length;i<n;i++)s[i]&&s[i].onDismount&&s[i].onDismount();e._setMounted(!1),e._setParent(null)}this._nodes[t]=null},n.prototype.getNode=function(t){return this._nodes[t]},n.prototype.show=function(t){var e=this._nodes[t];if(!e)throw new Error("No node registered to path: "+t);e.onShow&&e.onShow(),this.addChildrenToQueue(e);for(var i;i=this.breadthFirstNext();)this.show(i.getLocation())},n.prototype.hide=function(t){var e=this._nodes[t];if(!e)throw new Error("No node registered to path: "+t);e.onHide&&e.onHide(),this.addChildrenToQueue(e);for(var i;i=this.breadthFirstNext();)this.hide(i.getLocation())},n.prototype.lookupNode=function(t){if(!t)throw new Error("lookupNode must be called with a path");this._queue.length=0;var e=this._queue;o(t,e);for(var i=0,n=e.length;i<n;i++)e[i]=this._nodes[e[i]];return e[e.length-1]},n.prototype.dispatch=function(t,e,i){if(!t)throw new Error("dispatch requires a path as it's first argument");if(!e)throw new Error("dispatch requires an event name as it's second argument");var n=this._nodes[t];if(!n)throw new Error("No node registered at path: "+t);this.addChildrenToQueue(n);for(var o;o=this.breadthFirstNext();)o.onReceive&&o.onReceive(e,i)},n.prototype.dispatchUIEvent=function(t,e,i){if(!t)throw new Error("dispatchUIEvent needs a valid path to dispatch to");if(!e)throw new Error("dispatchUIEvent needs an event name as its second argument");var n;if(s.call(i),n=this.getNode(t)){var o,r,a,h;for(i.node=n;n;){for(n.onReceive&&n.onReceive(e,i),r=n.getComponents(),a=0,h=r.length;a<h;a++)r[a]&&r[a].onReceive&&r[a].onReceive(e,i);if(i.propagationStopped)break;if((o=n.getParent())===n)return;n=o}}},e.exports=new n},{"./Event":11,"./Path":14}],11:[function(t,e,i){"use strict";function n(){this.propagationStopped=!1,this.stopPropagation=o}function o(){this.propagationStopped=!0}e.exports=n},{}],12:[function(t,e,i){"use strict";function n(){var t=this;a._setUpdater(this),this._updateQueue=[],this._nextUpdateQueue=[],this._scenes={},this._messages=g,this._inUpdate=!1,this._clock=new o,this._channel=new r,this._channel.onMessage=function(e){t.handleMessage(e)}}var o=t("./Clock"),s=t("./Scene"),r=t("./Channel"),a=t("./Dispatch"),h=t("../renderers/UIManager"),u=t("../renderers/Compositor"),c=t("../render-loops/RequestAnimationFrameLoop"),p=t("./TransformSystem"),l=t("./SizeSystem"),d=t("./Commands"),f=[d.ENGINE,d.START],m=[d.ENGINE,d.STOP],g=[d.TIME,null];n.prototype.init=function(t){return this.compositor=t&&t.compositor||new u,this.renderLoop=t&&t.renderLoop||new c,this.uiManager=new h(this.getChannel(),this.compositor,this.renderLoop),this},n.prototype.setChannel=function(t){return this._channel=t,this},n.prototype.getChannel=function(){return this._channel},n.prototype._update=function(){this._inUpdate=!0;var t,e=this._clock.now(),i=this._nextUpdateQueue,n=this._updateQueue;for(this._messages[1]=e,l.update(),p.onUpdate();i.length;)n.unshift(i.pop());for(;n.length;)t=n.shift(),t&&t.update&&t.update(e),t&&t.onUpdate&&t.onUpdate(e);this._inUpdate=!1},n.prototype.requestUpdate=function(t){if(!t)throw new Error("requestUpdate must be called with a class to be updated");this._inUpdate?this.requestUpdateOnNextTick(t):this._updateQueue.push(t)},n.prototype.requestUpdateOnNextTick=function(t){this._nextUpdateQueue.push(t)},n.prototype.handleMessage=function(t){if(!t)throw new Error("onMessage must be called with an array of messages");for(var e;t.length>0;)switch(e=t.shift()){case d.WITH:this.handleWith(t);break;case d.FRAME:this.handleFrame(t);break;default:throw new Error("received unknown command: "+e)}return this},n.prototype.handleWith=function(t){var e=t.shift(),i=t.shift();switch(i){case d.TRIGGER:var n=t.shift(),o=t.shift();a.dispatchUIEvent(e,n,o);break;default:throw new Error("received unknown command: "+i)}return this},n.prototype.handleFrame=function(t){if(!t)throw new Error("handleFrame must be called with an array of messages");if(!t.length)throw new Error("FRAME must be sent with a time");return this.step(t.shift()),this},n.prototype.step=function(t){if(null==t)throw new Error("step must be called with a time");if(this._clock.step(t),this._update(),this._messages.length)for(this._channel.sendMessage(this._messages);this._messages.length>2;)this._messages.pop();return this},n.prototype.getContext=function(t){if(!t)throw new Error("getContext must be called with a selector");var e=t.indexOf("/");return t=-1===e?t:t.substring(0,e),this._scenes[t]},n.prototype.getClock=function(){return this._clock},n.prototype.message=function(t){return this._messages.push(t),this},n.prototype.createScene=function(t){return t=t||"body",this._scenes[t]&&this._scenes[t].dismount(),this._scenes[t]=new s(t,this),this._scenes[t]},n.prototype.addScene=function(t){var e=t._selector,i=this._scenes[e];return i&&i!==t&&i.dismount(),t.isMounted()||t.mount(),this._scenes[e]=t,this},n.prototype.removeScene=function(t){var e=t._selector,i=this._scenes[e];return i&&i===t&&(t.isMounted()&&t.dismount(),delete this._scenes[e]),this},n.prototype.startRenderLoop=function(){return this._channel.sendMessage(f),this},n.prototype.stopRenderLoop=function(){return this._channel.sendMessage(m),this},n.prototype.startEngine=function(){return console.warn("FamousEngine.startEngine is deprecated! Use FamousEngine.startRenderLoop instead!"),this.startRenderLoop()},n.prototype.stopEngine=function(){return console.warn("FamousEngine.stopEngine is deprecated! Use FamousEngine.stopRenderLoop instead!"),this.stopRenderLoop()},e.exports=new n},{"../render-loops/RequestAnimationFrameLoop":39,"../renderers/Compositor":40,"../renderers/UIManager":42,"./Channel":7,"./Clock":8,"./Commands":9,"./Dispatch":10,"./Scene":16,"./SizeSystem":18,"./TransformSystem":20}],13:[function(t,e,i){"use strict";function n(){this._requestingUpdate=!1,this._inUpdate=!1,this._mounted=!1,this._shown=!1,this._updater=null,this._opacity=1,this._UIEvents=[],this._updateQueue=[],this._nextUpdateQueue=[],this._freedComponentIndicies=[],this._components=[],this._freedChildIndicies=[],this._children=[],this._parent=null,this._id=null,this._transformID=null,this._sizeID=null,this.constructor.INIT_DEFAULT_COMPONENTS&&this._init()}var o=t("./SizeSystem"),s=t("./Dispatch"),r=t("./TransformSystem"),a=t("./Size"),h=t("./Transform");n.RELATIVE_SIZE=0,n.ABSOLUTE_SIZE=1,n.RENDER_SIZE=2,n.DEFAULT_SIZE=0,n.INIT_DEFAULT_COMPONENTS=!0,n.prototype._init=function(){this._transformID=this.addComponent(new h),this._sizeID=this.addComponent(new a)},n.prototype._setParent=function(t){this._parent&&-1!==this._parent.getChildren().indexOf(this)&&this._parent.removeChild(this),this._parent=t},n.prototype._setMounted=function(t,e){this._mounted=t,this._id=e||null},n.prototype._setShown=function(t){this._shown=t},n.prototype._setUpdater=function(t){this._updater=t,this._requestingUpdate&&this._updater.requestUpdate(this)},n.prototype.getLocation=function(){return this._id},n.prototype.getId=n.prototype.getLocation,n.prototype.emit=function(t,e){return s.dispatch(this.getLocation(),t,e),this},n.prototype.sendDrawCommand=function(t){return this._updater.message(t),this},n.prototype.getValue=function(){var t=this._children.length,e=this._components.length,i=0,n={location:this.getId(),spec:{location:this.getId(),showState:{mounted:this.isMounted(),shown:this.isShown(),opacity:this.getOpacity()||null},offsets:{mountPoint:[0,0,0],align:[0,0,0],origin:[0,0,0]},vectors:{position:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1]},size:{sizeMode:[0,0,0],proportional:[1,1,1],differential:[0,0,0],absolute:[0,0,0],render:[0,0,0]}},UIEvents:this._UIEvents,components:[],children:[]};if(n.location){var s=r.get(this.getId()),a=o.get(this.getId());for(i=0;i<3;i++)n.spec.offsets.mountPoint[i]=s.offsets.mountPoint[i],n.spec.offsets.align[i]=s.offsets.align[i],n.spec.offsets.origin[i]=s.offsets.origin[i],n.spec.vectors.position[i]=s.vectors.position[i],n.spec.vectors.rotation[i]=s.vectors.rotation[i],n.spec.vectors.scale[i]=s.vectors.scale[i],n.spec.size.sizeMode[i]=a.sizeMode[i],n.spec.size.proportional[i]=a.proportionalSize[i],n.spec.size.differential[i]=a.differentialSize[i],n.spec.size.absolute[i]=a.absoluteSize[i],n.spec.size.render[i]=a.renderSize[i];n.spec.vectors.rotation[3]=s.vectors.rotation[3]}for(i=0;i<t;i++)this._children[i]&&this._children[i].getValue&&n.children.push(this._children[i].getValue());for(i=0;i<e;i++)this._components[i]&&this._components[i].getValue&&n.components.push(this._components[i].getValue());return n},n.prototype.getComputedValue=function(){console.warn("Node.getComputedValue is depricated. Use Node.getValue instead");for(var t=this._children.length,e={location:this.getId(),computedValues:{transform:this.isMounted()?r.get(this.getLocation()).getLocalTransform():null,size:this.isMounted()?o.get(this.getLocation()).get():null},children:[]},i=0;i<t;i++)this._children[i]&&this._children[i].getComputedValue&&e.children.push(this._children[i].getComputedValue());return e},n.prototype.getChildren=function(){return this._children},n.prototype.getParent=function(){return this._parent},n.prototype.requestUpdate=function(t){return this._inUpdate||!this.isMounted()?this.requestUpdateOnNextTick(t):(this._updateQueue.push(t),this._requestingUpdate||this._requestUpdate(),this)},n.prototype.requestUpdateOnNextTick=function(t){return this._nextUpdateQueue.push(t),this},n.prototype.isMounted=function(){return this._mounted},n.prototype.isShown=function(){return this._shown},n.prototype.getOpacity=function(){return this._opacity},n.prototype.getMountPoint=function(){if(this.constructor.INIT_DEFAULT_COMPONENTS)return this.getComponent(this._transformID).getMountPoint();if(this.isMounted())return r.get(this.getLocation()).getMountPoint();throw new Error("This node does not have access to a transform component")},n.prototype.getAlign=function(){if(this.constructor.INIT_DEFAULT_COMPONENTS)return this.getComponent(this._transformID).getAlign();if(this.isMounted())return r.get(this.getLocation()).getAlign();throw new Error("This node does not have access to a transform component")},n.prototype.getOrigin=function(){if(this.constructor.INIT_DEFAULT_COMPONENTS)return this.getComponent(this._transformID).getOrigin();if(this.isMounted())return r.get(this.getLocation()).getOrigin();throw new Error("This node does not have access to a transform component")},n.prototype.getPosition=function(){if(this.constructor.INIT_DEFAULT_COMPONENTS)return this.getComponent(this._transformID).getPosition();if(this.isMounted())return r.get(this.getLocation()).getPosition();throw new Error("This node does not have access to a transform component")},n.prototype.getRotation=function(){if(this.constructor.INIT_DEFAULT_COMPONENTS)return this.getComponent(this._transformID).getRotation();if(this.isMounted())return r.get(this.getLocation()).getRotation();throw new Error("This node does not have access to a transform component")},n.prototype.getScale=function(){if(this.constructor.INIT_DEFAULT_COMPONENTS)return this.getComponent(this._transformID).getScale();if(this.isMounted())return r.get(this.getLocation()).getScale();throw new Error("This node does not have access to a transform component")},n.prototype.getSizeMode=function(){if(this.constructor.INIT_DEFAULT_COMPONENTS)return this.getComponent(this._sizeID).getSizeMode();if(this.isMounted())return o.get(this.getLocation()).getSizeMode();throw new Error("This node does not have access to a size component")},n.prototype.getProportionalSize=function(){if(this.constructor.INIT_DEFAULT_COMPONENTS)return this.getComponent(this._sizeID).getProportional();if(this.isMounted())return o.get(this.getLocation()).getProportional();throw new Error("This node does not have access to a size component")},n.prototype.getDifferentialSize=function(){if(this.constructor.INIT_DEFAULT_COMPONENTS)return this.getComponent(this._sizeID).getDifferential();if(this.isMounted())return o.get(this.getLocation()).getDifferential();throw new Error("This node does not have access to a size component")},n.prototype.getAbsoluteSize=function(){if(this.constructor.INIT_DEFAULT_COMPONENTS)return this.getComponent(this._sizeID).getAbsolute();if(this.isMounted())return o.get(this.getLocation()).getAbsolute();throw new Error("This node does not have access to a size component")},n.prototype.getRenderSize=function(){if(this.constructor.INIT_DEFAULT_COMPONENTS)return this.getComponent(this._sizeID).getRender();if(this.isMounted())return o.get(this.getLocation()).getRender()
;throw new Error("This node does not have access to a size component")},n.prototype.getSize=function(){if(this.constructor.INIT_DEFAULT_COMPONENTS)return this.getComponent(this._sizeID).get();if(this.isMounted())return o.get(this.getLocation()).get();throw new Error("This node does not have access to a size component")},n.prototype.getTransform=function(){return r.get(this.getLocation())},n.prototype.getUIEvents=function(){return this._UIEvents},n.prototype.addChild=function(t){var e=t?this._children.indexOf(t):-1;return t=t||new n,-1===e&&(e=this._freedChildIndicies.length?this._freedChildIndicies.pop():this._children.length,this._children[e]=t),this.isMounted()&&t.mount(this.getLocation()+"/"+e),t},n.prototype.removeChild=function(t){var e=this._children.indexOf(t);if(e>-1)return this._freedChildIndicies.push(e),this._children[e]=null,t.isMounted()&&t.dismount(),!0;throw new Error("Node is not a child of this node")},n.prototype.addComponent=function(t){var e=this._components.indexOf(t);return-1===e&&(e=this._freedComponentIndicies.length?this._freedComponentIndicies.pop():this._components.length,this._components[e]=t,this.isMounted()&&t.onMount&&t.onMount(this,e),this.isShown()&&t.onShow&&t.onShow()),e},n.prototype.getComponent=function(t){return this._components[t]},n.prototype.removeComponent=function(t){var e=this._components.indexOf(t);return-1!==e&&(this._freedComponentIndicies.push(e),this.isShown()&&t.onHide&&t.onHide(),this.isMounted()&&t.onDismount&&t.onDismount(),this._components[e]=null),t},n.prototype.removeUIEvent=function(t){var e,i=this.getUIEvents(),n=this._components,o=i.indexOf(t);if(-1!==o){i.splice(o,1);for(var s=0,r=n.length;s<r;s++)(e=n[s])&&e.onRemoveUIEvent&&e.onRemoveUIEvent(t)}},n.prototype.addUIEvent=function(t){var e,i=this.getUIEvents(),n=this._components;if(-1===i.indexOf(t)){i.push(t);for(var o=0,s=n.length;o<s;o++)(e=n[o])&&e.onAddUIEvent&&e.onAddUIEvent(t)}},n.prototype._requestUpdate=function(t){!t&&this._requestingUpdate||(this._updater&&this._updater.requestUpdate(this),this._requestingUpdate=!0)},n.prototype._vecOptionalSet=function(t,e,i){return null!=i&&t[e]!==i&&(t[e]=i,this._requestingUpdate||this._requestUpdate(),!0)},n.prototype.show=function(){return s.show(this.getLocation()),this._shown=!0,this},n.prototype.hide=function(){return s.hide(this.getLocation()),this._shown=!1,this},n.prototype.setAlign=function(t,e,i){if(this.constructor.INIT_DEFAULT_COMPONENTS)this.getComponent(this._transformID).setAlign(t,e,i);else{if(!this.isMounted())throw new Error("This node does not have access to a transform component");r.get(this.getLocation()).setAlign(t,e,i)}return this},n.prototype.setMountPoint=function(t,e,i){if(this.constructor.INIT_DEFAULT_COMPONENTS)this.getComponent(this._transformID).setMountPoint(t,e,i);else{if(!this.isMounted())throw new Error("This node does not have access to a transform component");r.get(this.getLocation()).setMountPoint(t,e,i)}return this},n.prototype.setOrigin=function(t,e,i){if(this.constructor.INIT_DEFAULT_COMPONENTS)this.getComponent(this._transformID).setOrigin(t,e,i);else{if(!this.isMounted())throw new Error("This node does not have access to a transform component");r.get(this.getLocation()).setOrigin(t,e,i)}return this},n.prototype.setPosition=function(t,e,i){if(this.constructor.INIT_DEFAULT_COMPONENTS)this.getComponent(this._transformID).setPosition(t,e,i);else{if(!this.isMounted())throw new Error("This node does not have access to a transform component");r.get(this.getLocation()).setPosition(t,e,i)}return this},n.prototype.setRotation=function(t,e,i,n){if(this.constructor.INIT_DEFAULT_COMPONENTS)this.getComponent(this._transformID).setRotation(t,e,i,n);else{if(!this.isMounted())throw new Error("This node does not have access to a transform component");r.get(this.getLocation()).setRotation(t,e,i,n)}return this},n.prototype.setScale=function(t,e,i){if(this.constructor.INIT_DEFAULT_COMPONENTS)this.getComponent(this._transformID).setScale(t,e,i);else{if(!this.isMounted())throw new Error("This node does not have access to a transform component");r.get(this.getLocation()).setScale(t,e,i)}return this},n.prototype.setOpacity=function(t){if(t!==this._opacity){this._opacity=t,this._requestingUpdate||this._requestUpdate();for(var e,i=0,n=this._components,o=n.length;i<o;i++)(e=n[i])&&e.onOpacityChange&&e.onOpacityChange(t)}return this},n.prototype.setSizeMode=function(t,e,i){if(this.constructor.INIT_DEFAULT_COMPONENTS)this.getComponent(this._sizeID).setSizeMode(t,e,i);else{if(!this.isMounted())throw new Error("This node does not have access to a size component");o.get(this.getLocation()).setSizeMode(t,e,i)}return this},n.prototype.setProportionalSize=function(t,e,i){if(this.constructor.INIT_DEFAULT_COMPONENTS)this.getComponent(this._sizeID).setProportional(t,e,i);else{if(!this.isMounted())throw new Error("This node does not have access to a size component");o.get(this.getLocation()).setProportional(t,e,i)}return this},n.prototype.setDifferentialSize=function(t,e,i){if(this.constructor.INIT_DEFAULT_COMPONENTS)this.getComponent(this._sizeID).setDifferential(t,e,i);else{if(!this.isMounted())throw new Error("This node does not have access to a size component");o.get(this.getLocation()).setDifferential(t,e,i)}return this},n.prototype.setAbsoluteSize=function(t,e,i){if(this.constructor.INIT_DEFAULT_COMPONENTS)this.getComponent(this._sizeID).setAbsolute(t,e,i);else{if(!this.isMounted())throw new Error("This node does not have access to a size component");o.get(this.getLocation()).setAbsolute(t,e,i)}return this},n.prototype.getFrame=function(){return this._updater.getFrame()},n.prototype.getComponents=function(){return this._components},n.prototype.update=function(t){this._inUpdate=!0;var e,i=this._nextUpdateQueue,n=this._updateQueue;for(this.onUpdate&&this.onUpdate();i.length;)n.unshift(i.pop());for(;n.length;)(e=this._components[n.shift()])&&e.onUpdate&&e.onUpdate(t);return this._inUpdate=!1,this._requestingUpdate=!1,this.isMounted()?this._nextUpdateQueue.length&&(this._updater.requestUpdateOnNextTick(this),this._requestingUpdate=!0):(this._parent=null,this._id=null),this},n.prototype.mount=function(t){if(this.isMounted())throw new Error("Node is already mounted at: "+this.getLocation());return this.constructor.INIT_DEFAULT_COMPONENTS?(r.registerTransformAtPath(t,this.getComponent(this._transformID)),o.registerSizeAtPath(t,this.getComponent(this._sizeID))):(r.registerTransformAtPath(t),o.registerSizeAtPath(t)),s.mount(t,this),this._requestingUpdate||this._requestUpdate(),this},n.prototype.dismount=function(){if(!this.isMounted())throw new Error("Node is not mounted");var t=this.getLocation();r.deregisterTransformAtPath(t),o.deregisterSizeAtPath(t),s.dismount(t),this._requestingUpdate||this._requestUpdate()},e.exports=n},{"./Dispatch":10,"./Size":17,"./SizeSystem":18,"./Transform":19,"./TransformSystem":20}],14:[function(t,e,i){"use strict";function n(){}n.prototype.hasTrailingSlash=function(t){return"/"===t[t.length-1]},n.prototype.depth=function(t){for(var e=0,i=t.length,n=this.hasTrailingSlash(t)?i-1:i,o=0;o<n;o++)e+="/"===t[o]?1:0;return e},n.prototype.index=function(t){for(var e=t.length,i=this.hasTrailingSlash(t)?e-1:e;i--&&"/"!==t[i];);var n=parseInt(t.substring(i+1));return isNaN(n)?0:n},n.prototype.indexAtDepth=function(t,e){for(var i=0,n=t.length,o=0;i<n;i++)if("/"===t[i]&&o++,o===e)return t=t.substring(i?i+1:i),o=t.indexOf("/"),t=-1===o?t:t.substring(0,o),o=parseInt(t),isNaN(o)?t:o},n.prototype.parent=function(t){return t.substring(0,t.lastIndexOf("/",t.length-2))},n.prototype.isChildOf=function(t,e){return this.isDescendentOf(t,e)&&this.depth(t)===this.depth(e)+1},n.prototype.isDescendentOf=function(t,e){return t!==e&&(t=this.hasTrailingSlash(t)?t:t+"/",e=this.hasTrailingSlash(e)?e:e+"/",this.depth(e)<this.depth(t)&&0===t.indexOf(e))},n.prototype.getSelector=function(t){var e=t.indexOf("/");return-1===e?t:t.substring(0,e)},e.exports=new n},{}],15:[function(t,e,i){"use strict";function n(){this.items=[],this.paths=[],this.memo={}}var o=t("./Path");n.prototype.insert=function(t,e){var i=this.paths;if(-1!==i.indexOf(t))throw new Error("item already exists at path: "+t);for(var n=0,s=o.depth(t),r=o.index(t);i[n]&&s>=o.depth(i[n]);)n++;for(;i[n]&&s===o.depth(i[n])&&r<o.index(i[n]);)n++;i.splice(n,0,t),this.items.splice(n,0,e),this.memo[t]=n;for(var a=this.paths.length;n<a;n++)this.memo[this.paths[n]]=null},n.prototype.remove=function(t){var e=this.paths,i=this.memo[t]?this.memo[t]:e.indexOf(t);if(-1===i)throw new Error("Cannot remove. No item exists at path: "+t);e.splice(i,1),this.items.splice(i,1),this.memo[t]=null;for(var n=this.paths.length;i<n;i++)this.memo[this.paths[i]]=null},n.prototype.get=function(t){if(this.memo[t])return this.items[this.memo[t]];var e=this.paths.indexOf(t);return-1!==e?(this.memo[t]=e,this.items[e]):void 0},n.prototype.getItems=function(){return this.items},n.prototype.getPaths=function(){return this.paths},e.exports=n},{"./Path":14}],16:[function(t,e,i){"use strict";function n(t,e){if(!t)throw new Error("Scene needs to be created with a DOM selector");if(!e)throw new Error("Scene needs to be created with a class like Famous");o.call(this),this._globalUpdater=e,this._selector=t,this.mount(t),this._globalUpdater.message(r.NEED_SIZE_FOR).message(t),this.show()}var o=t("./Node"),s=t("./Dispatch"),r=t("./Commands"),a=t("./TransformSystem"),h=t("./SizeSystem");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.getUpdater=function(){return this._updater},n.prototype.getSelector=function(){return this._selector},n.prototype.getDispatch=function(){return console.warn("Scene#getDispatch is deprecated, require the dispatch directly"),s},n.prototype.onReceive=function(t,e){if("CONTEXT_RESIZE"===t){if(e.length<2)throw new Error("CONTEXT_RESIZE's payload needs to be at least a pair of pixel sizes");this.setSizeMode("absolute","absolute","absolute"),this.setAbsoluteSize(e[0],e[1],e[2]?e[2]:0),this._updater.message(r.WITH).message(this._selector).message(r.READY)}},n.prototype.mount=function(t){if(this.isMounted())throw new Error("Scene is already mounted at: "+this.getLocation());s.mount(t,this),this._id=t,this._mounted=!0,this._parent=this,a.registerTransformAtPath(t),h.registerSizeAtPath(t)},e.exports=n},{"./Commands":9,"./Dispatch":10,"./Node":13,"./SizeSystem":18,"./TransformSystem":20}],17:[function(t,e,i){"use strict";function n(t){this.finalSize=new Float32Array(3),this.sizeChanged=!1,this.sizeMode=new Uint8Array(3),this.sizeModeChanged=!1,this.absoluteSize=new Float32Array(3),this.absoluteSizeChanged=!1,this.proportionalSize=new Float32Array(a),this.proportionalSizeChanged=!1,this.differentialSize=new Float32Array(3),this.differentialSizeChanged=!1,this.renderSize=new Float32Array(3),this.renderSizeChanged=!1,this.parent=null!=t?t:null}function o(t,e,i){return null!=i&&t[e]!==i&&(t[e]=i,!0)}function s(t,e,i,n){var s=!1;return s=o(t,0,e)||s,s=o(t,1,i)||s,s=o(t,2,n)||s}function r(t){if(t.constructor===String)switch(t.toLowerCase()){case"relative":case"default":return n.RELATIVE;case"absolute":return n.ABSOLUTE;case"render":return n.RENDER;default:throw new Error("unknown size mode: "+t)}else if(t<0||t>n.RENDER)throw new Error("unknown size mode: "+t);return t}var a=[1,1,1],h=[0,0,0];n.RELATIVE=0,n.ABSOLUTE=1,n.RENDER=2,n.DEFAULT=n.RELATIVE,n.prototype.setParent=function(t){return this.parent=t,this},n.prototype.getParent=function(){return this.parent},n.prototype.setSizeMode=function(t,e,i){return null!=t&&(t=r(t)),null!=e&&(e=r(e)),null!=i&&(i=r(i)),this.sizeModeChanged=s(this.sizeMode,t,e,i),this},n.prototype.getSizeMode=function(){return this.sizeMode},n.prototype.setAbsolute=function(t,e,i){return this.absoluteSizeChanged=s(this.absoluteSize,t,e,i),this},n.prototype.getAbsolute=function(){return this.absoluteSize},n.prototype.setProportional=function(t,e,i){return this.proportionalSizeChanged=s(this.proportionalSize,t,e,i),this},n.prototype.getProportional=function(){return this.proportionalSize},n.prototype.setDifferential=function(t,e,i){return this.differentialSizeChanged=s(this.differentialSize,t,e,i),this},n.prototype.getDifferential=function(){return this.differentialSize},n.prototype.get=function(){return this.finalSize},n.prototype.fromComponents=function(t){for(var e,i,o=this.sizeMode,s=this.finalSize,r=this.parent?this.parent.get():h,a=!1,u=t.length,c=0;c<3;c++){switch(e=s[c],o[c]){case n.RELATIVE:s[c]=r[c]*this.proportionalSize[c]+this.differentialSize[c];break;case n.ABSOLUTE:s[c]=this.absoluteSize[c];break;case n.RENDER:var p,l;for(i=0;i<u;i++)(l=t[i])&&l.getRenderSize&&(p=l.getRenderSize()[c],s[c]=s[c]<p||0===s[c]?p:s[c])}a=a||e!==s[c]}return this.sizeChanged=a,a},e.exports=n},{}],18:[function(t,e,i){"use strict";function n(){this.pathStore=new c}function o(t,e,i){var n=i.getSizeMode(),o=n[0],s=n[1],r=n[2];t.onSizeModeChange&&t.onSizeModeChange(o,s,r);for(var a=0,h=e.length;a<h;a++)e[a]&&e[a].onSizeModeChange&&e[a].onSizeModeChange(o,s,r);i.sizeModeChanged=!1}function s(t,e,i){var n=i.getAbsolute(),o=n[0],s=n[1],r=n[2];t.onAbsoluteSizeChange&&t.onAbsoluteSizeChange(o,s,r);for(var a=0,h=e.length;a<h;a++)e[a]&&e[a].onAbsoluteSizeChange&&e[a].onAbsoluteSizeChange(o,s,r);i.absoluteSizeChanged=!1}function r(t,e,i){var n=i.getProportional(),o=n[0],s=n[1],r=n[2];t.onProportionalSizeChange&&t.onProportionalSizeChange(o,s,r);for(var a=0,h=e.length;a<h;a++)e[a]&&e[a].onProportionalSizeChange&&e[a].onProportionalSizeChange(o,s,r);i.proportionalSizeChanged=!1}function a(t,e,i){var n=i.getDifferential(),o=n[0],s=n[1],r=n[2];t.onDifferentialSizeChange&&t.onDifferentialSizeChange(o,s,r);for(var a=0,h=e.length;a<h;a++)e[a]&&e[a].onDifferentialSizeChange&&e[a].onDifferentialSizeChange(o,s,r);i.differentialSizeChanged=!1}function h(t,e,i){var n=i.getRenderSize(),o=n[0],s=n[1],r=n[2];t.onRenderSizeChange&&t.onRenderSizeChange(o,s,r);for(var a=0,h=e.length;a<h;a++)e[a]&&e[a].onRenderSizeChange&&e[a].onRenderSizeChange(o,s,r);i.renderSizeChanged=!1}function u(t,e,i){var n=i.get(),o=n[0],s=n[1],r=n[2];t.onSizeChange&&t.onSizeChange(o,s,r);for(var a=0,h=e.length;a<h;a++)e[a]&&e[a].onSizeChange&&e[a].onSizeChange(o,s,r);i.sizeChanged=!1}var c=t("./PathStore"),p=t("./Size"),l=t("./Dispatch"),d=t("./Path");n.prototype.registerSizeAtPath=function(t,e){if(!d.depth(t))return this.pathStore.insert(t,e||new p);var i=this.pathStore.get(d.parent(t));if(!i)throw new Error("No parent size registered at expected path: "+d.parent(t));e&&e.setParent(i),this.pathStore.insert(t,e||new p(i))},n.prototype.deregisterSizeAtPath=function(t){this.pathStore.remove(t)},n.prototype.get=function(t){return this.pathStore.get(t)},n.prototype.update=function(){var t,e,i,n,c,p=this.pathStore.getItems(),d=this.pathStore.getPaths();for(i=0,n=p.length;i<n;i++)t=l.getNode(d[i]),c=t.getComponents(),t&&(e=p[i],e.sizeModeChanged&&o(t,c,e),e.absoluteSizeChanged&&s(t,c,e),e.proportionalSizeChanged&&r(t,c,e),e.differentialSizeChanged&&a(t,c,e),e.renderSizeChanged&&h(t,c,e),e.fromComponents(c)&&u(t,c,e))},e.exports=new n},{"./Dispatch":10,"./Path":14,"./PathStore":15,"./Size":17}],19:[function(t,e,i){"use strict";function n(t){this.local=new Float32Array(n.IDENT),this.global=new Float32Array(n.IDENT),this.offsets={align:new Float32Array(3),alignChanged:!1,mountPoint:new Float32Array(3),mountPointChanged:!1,origin:new Float32Array(3),originChanged:!1},this.vectors={position:new Float32Array(3),positionChanged:!1,rotation:new Float32Array(u),rotationChanged:!1,scale:new Float32Array(c),scaleChanged:!1},this._lastEulerVals=[0,0,0],this._lastEuler=!1,this.parent=t||null,this.breakPoint=!1}function o(t,e,i){return null!=i&&t[e]!==i&&(t[e]=i,!0)}function s(t,e,i,n,s){var r=!1;return r=o(t,0,e)||r,r=o(t,1,i)||r,r=o(t,2,n)||r,null!=s&&(r=o(t,3,s)||r),r}function r(t,e){var i=e.getLocalTransform(),o=t.getSize(),s=e.vectors,r=e.offsets,a=t.getParent().getSize(),h=0,u=i[0],c=i[1],p=i[2],l=i[4],d=i[5],f=i[6],m=i[8],g=i[9],_=i[10],y=i[12],v=i[13],b=i[14],T=s.position[0],E=s.position[1],w=s.position[2],S=s.rotation[0],C=s.rotation[1],I=s.rotation[2],O=s.rotation[3],R=s.scale[0],N=s.scale[1],A=s.scale[2],L=r.align[0]*a[0],M=r.align[1]*a[1],D=r.align[2]*a[2],x=r.mountPoint[0]*o[0],P=r.mountPoint[1]*o[1],U=r.mountPoint[2]*o[2],z=r.origin[0]*o[0],F=r.origin[1]*o[1],k=r.origin[2]*o[2],G=O*S,H=O*C,B=O*I,q=S*S,V=C*C,W=I*I,Y=S*C,j=S*I,K=C*I;return i[0]=(1-2*(V+W))*R,i[1]=2*(Y+B)*R,i[2]=2*(j-H)*R,i[3]=0,i[4]=2*(Y-B)*N,i[5]=(1-2*(q+W))*N,i[6]=2*(K+G)*N,i[7]=0,i[8]=2*(j+H)*A,i[9]=2*(K-G)*A,i[10]=(1-2*(q+V))*A,i[11]=0,i[12]=L+T-x+z-(i[0]*z+i[4]*F+i[8]*k),i[13]=M+E-P+F-(i[1]*z+i[5]*F+i[9]*k),i[14]=D+w-U+k-(i[2]*z+i[6]*F+i[10]*k),i[15]=1,e.isBreakPoint()&&e.calculateWorldMatrix()&&(h|=n.WORLD_CHANGED),u===i[0]&&c===i[1]&&p===i[2]&&l===i[4]&&d===i[5]&&f===i[6]&&m===i[8]&&g===i[9]&&_===i[10]&&y===i[12]&&v===i[13]&&b===i[14]||(h|=n.LOCAL_CHANGED),h}function a(t,e){var i=e.getLocalTransform(),o=e.parent.getLocalTransform(),s=t.getSize(),r=e.vectors,a=e.offsets,h=t.getParent().getSize(),u=!1,c=i[0],p=i[1],l=i[2],d=i[4],f=i[5],m=i[6],g=i[8],_=i[9],y=i[10],v=i[12],b=i[13],T=i[14],E=o[0],w=o[1],S=o[2],C=o[4],I=o[5],O=o[6],R=o[8],N=o[9],A=o[10],L=o[12],M=o[13],D=o[14],x=r.position[0],P=r.position[1],U=r.position[2],z=r.rotation[0],F=r.rotation[1],k=r.rotation[2],G=r.rotation[3],H=r.scale[0],B=r.scale[1],q=r.scale[2],V=a.align[0]*h[0],W=a.align[1]*h[1],Y=a.align[2]*h[2],j=a.mountPoint[0]*s[0],K=a.mountPoint[1]*s[1],X=a.mountPoint[2]*s[2],Q=a.origin[0]*s[0],J=a.origin[1]*s[1],Z=a.origin[2]*s[2],$=G*z,tt=G*F,et=G*k,it=z*z,nt=F*F,ot=k*k,st=z*F,rt=z*k,at=F*k,ht=(1-2*(nt+ot))*H,ut=2*(st+et)*H,ct=2*(rt-tt)*H,pt=2*(st-et)*B,lt=(1-2*(it+ot))*B,dt=2*(at+$)*B,ft=2*(rt+tt)*q,mt=2*(at-$)*q,gt=(1-2*(it+nt))*q,_t=V+x-j+Q-(ht*Q+pt*J+ft*Z),yt=W+P-K+J-(ut*Q+lt*J+mt*Z),vt=Y+U-X+Z-(ct*Q+dt*J+gt*Z);return i[0]=E*ht+C*ut+R*ct,i[1]=w*ht+I*ut+N*ct,i[2]=S*ht+O*ut+A*ct,i[3]=0,i[4]=E*pt+C*lt+R*dt,i[5]=w*pt+I*lt+N*dt,i[6]=S*pt+O*lt+A*dt,i[7]=0,i[8]=E*ft+C*mt+R*gt,i[9]=w*ft+I*mt+N*gt,i[10]=S*ft+O*mt+A*gt,i[11]=0,i[12]=E*_t+C*yt+R*vt+L,i[13]=w*_t+I*yt+N*vt+M,i[14]=S*_t+O*yt+A*vt+D,i[15]=1,e.isBreakPoint()&&e.calculateWorldMatrix()&&(u|=n.WORLD_CHANGED),c===i[0]&&p===i[1]&&l===i[2]&&d===i[4]&&f===i[5]&&m===i[6]&&g===i[8]&&_===i[9]&&y===i[10]&&v===i[12]&&b===i[13]&&T===i[14]||(u|=n.LOCAL_CHANGED),u}function h(t,e,i){var n,o=e[0],s=e[1],r=e[2],a=e[4],h=e[5],u=e[6],c=e[8],p=e[9],l=e[10],d=e[12],f=e[13],m=e[14],g=!1,_=i[0],y=i[1],v=i[2],b=i[3];return n=_*o+y*a+v*c+b*d,g=g||t[0]===n,t[0]=n,n=_*s+y*h+v*p+b*f,g=g||t[1]===n,t[1]=n,n=_*r+y*u+v*l+b*m,g=g||t[2]===n,t[2]=n,t[3]=0,_=i[4],y=i[5],v=i[6],b=i[7],n=_*o+y*a+v*c+b*d,g=g||t[4]===n,t[4]=n,n=_*s+y*h+v*p+b*f,g=g||t[5]===n,t[5]=n,n=_*r+y*u+v*l+b*m,g=g||t[6]===n,t[6]=n,t[7]=0,_=i[8],y=i[9],v=i[10],b=i[11],n=_*o+y*a+v*c+b*d,g=g||t[8]===n,t[8]=n,n=_*s+y*h+v*p+b*f,g=g||t[9]===n,t[9]=n,n=_*r+y*u+v*l+b*m,g=g||t[10]===n,t[10]=n,t[11]=0,_=i[12],y=i[13],v=i[14],b=i[15],n=_*o+y*a+v*c+b*d,g=g||t[12]===n,t[12]=n,n=_*s+y*h+v*p+b*f,g=g||t[13]===n,t[13]=n,n=_*r+y*u+v*l+b*m,g=g||t[14]===n,t[14]=n,t[15]=1,g}var u=[0,0,0,1],c=[1,1,1];n.IDENT=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n.WORLD_CHANGED=1,n.LOCAL_CHANGED=2,n.prototype.reset=function(){this.parent=null,this.breakPoint=!1},n.prototype.setParent=function(t){this.parent=t},n.prototype.getParent=function(){return this.parent},n.prototype.setBreakPoint=function(){this.breakPoint=!0},n.prototype.isBreakPoint=function(){return this.breakPoint},n.prototype.getLocalTransform=function(){return this.local},n.prototype.getWorldTransform=function(){if(!this.isBreakPoint())throw new Error("This transform is not calculating world transforms");return this.global},n.prototype.calculate=function(t){return!this.parent||this.parent.isBreakPoint()?r(t,this):a(t,this)},n.prototype.getPosition=function(){return this.vectors.position},n.prototype.setPosition=function(t,e,i){this.vectors.positionChanged=s(this.vectors.position,t,e,i)},n.prototype.getRotation=function(){return this.vectors.rotation},n.prototype.setRotation=function(t,e,i,n){var o,r,a,h,u=this.vectors.rotation;if(null!=n)o=t,r=e,a=i,h=n,this._lastEulerVals[0]=null,this._lastEulerVals[1]=null,this._lastEulerVals[2]=null,this._lastEuler=!1;else{if(null==t||null==e||null==i)if(this._lastEuler)t=null==t?this._lastEulerVals[0]:t,e=null==e?this._lastEulerVals[1]:e,i=null==i?this._lastEulerVals[2]:i;else{var c=-2*(u[1]*u[2]-u[3]*u[0]);Math.abs(c)>.99999?(e=null==e?.5*Math.PI*c:e,t=null==t?Math.atan2(-u[0]*u[2]+u[3]*u[1],.5-u[1]*u[1]-u[2]*u[2]):t,i=null==i?0:i):(e=null==e?Math.asin(c):e,t=null==t?Math.atan2(u[0]*u[2]+u[3]*u[1],.5-u[0]*u[0]-u[1]*u[1]):t,i=null==i?Math.atan2(u[0]*u[1]+u[3]*u[2],.5-u[0]*u[0]-u[2]*u[2]):i)}var p=.5*t,l=.5*e,d=.5*i,f=Math.sin(p),m=Math.sin(l),g=Math.sin(d),_=Math.cos(p),y=Math.cos(l),v=Math.cos(d),b=m*g,T=y*g,E=m*v,w=y*v;o=f*w+_*b,r=_*E-f*T,a=_*T+f*E,h=_*w-f*b,this._lastEuler=!0,this._lastEulerVals[0]=t,this._lastEulerVals[1]=e,this._lastEulerVals[2]=i}this.vectors.rotationChanged=s(u,o,r,a,h)},n.prototype.getScale=function(){return this.vectors.scale},n.prototype.setScale=function(t,e,i){this.vectors.scaleChanged=s(this.vectors.scale,t,e,i)},n.prototype.getAlign=function(){return this.offsets.align},n.prototype.setAlign=function(t,e,i){this.offsets.alignChanged=s(this.offsets.align,t,e,null!=i?i-.5:i)},n.prototype.getMountPoint=function(){return this.offsets.mountPoint},n.prototype.setMountPoint=function(t,e,i){this.offsets.mountPointChanged=s(this.offsets.mountPoint,t,e,null!=i?i-.5:i)},n.prototype.getOrigin=function(){return this.offsets.origin},n.prototype.setOrigin=function(t,e,i){this.offsets.originChanged=s(this.offsets.origin,t,e,null!=i?i-.5:i)},n.prototype.calculateWorldMatrix=function(){for(var t=this.parent;t&&!t.isBreakPoint();)t=t.parent;if(t)return h(this.global,t.getWorldTransform(),this.local);for(var e=0;e<16;e++)this.global[e]=this.local[e];return!1},e.exports=n},{}],20:[function(t,e,i){"use strict";function n(){this.pathStore=new g}function o(t,e,i){var n=i.align[0],o=i.align[1],s=i.align[2];t.onAlignChange&&t.onAlignChange(n,o,s);for(var r=0,a=e.length;r<a;r++)e[r]&&e[r].onAlignChange&&e[r].onAlignChange(n,o,s);i.alignChanged=!1}function s(t,e,i){var n=i.mountPoint[0],o=i.mountPoint[1],s=i.mountPoint[2];t.onMountPointChange&&t.onMountPointChange(n,o,s);for(var r=0,a=e.length;r<a;r++)e[r]&&e[r].onMountPointChange&&e[r].onMountPointChange(n,o,s);i.mountPointChanged=!1}function r(t,e,i){var n=i.origin[0],o=i.origin[1],s=i.origin[2];t.onOriginChange&&t.onOriginChange(n,o,s);for(var r=0,a=e.length;r<a;r++)e[r]&&e[r].onOriginChange&&e[r].onOriginChange(n,o,s);i.originChanged=!1}function a(t,e,i){var n=i.position[0],o=i.position[1],s=i.position[2];t.onPositionChange&&t.onPositionChange(n,o,s);for(var r=0,a=e.length;r<a;r++)e[r]&&e[r].onPositionChange&&e[r].onPositionChange(n,o,s);i.positionChanged=!1}function h(t,e,i){var n=i.rotation[0],o=i.rotation[1],s=i.rotation[2],r=i.rotation[3];t.onRotationChange&&t.onRotationChange(n,o,s,r);for(var a=0,h=e.length;a<h;a++)e[a]&&e[a].onRotationChange&&e[a].onRotationChange(n,o,s,r);i.rotationChanged=!1}function u(t,e,i){var n=i.scale[0],o=i.scale[1],s=i.scale[2];t.onScaleChange&&t.onScaleChange(n,o,s);for(var r=0,a=e.length;r<a;r++)e[r]&&e[r].onScaleChange&&e[r].onScaleChange(n,o,s);i.scaleChanged=!1}function c(t,e,i){t.onTransformChange&&t.onTransformChange(i);for(var n=0,o=e.length;n<o;n++)e[n]&&e[n].onTransformChange&&e[n].onTransformChange(i)}function p(t,e,i){t.onLocalTransformChange&&t.onLocalTransformChange(i);for(var n=0,o=e.length;n<o;n++)e[n]&&e[n].onLocalTransformChange&&e[n].onLocalTransformChange(i)}function l(t,e,i){t.onWorldTransformChange&&t.onWorldTransformChange(i);for(var n=0,o=e.length;n<o;n++)e[n]&&e[n].onWorldTransformChange&&e[n].onWorldTransformChange(i)}var d=t("./Path"),f=t("./Transform"),m=t("./Dispatch"),g=t("./PathStore");n.prototype.registerTransformAtPath=function(t,e){if(!d.depth(t))return this.pathStore.insert(t,e||new f);var i=this.pathStore.get(d.parent(t));if(!i)throw new Error("No parent transform registered at expected path: "+d.parent(t));e&&e.setParent(i),this.pathStore.insert(t,e||new f(i))},n.prototype.deregisterTransformAtPath=function(t){this.pathStore.remove(t)},n.prototype.makeBreakPointAt=function(t){var e=this.pathStore.get(t);if(!e)throw new Error("No transform Registered at path: "+t);e.setBreakPoint()},n.prototype.get=function(t){return this.pathStore.get(t)},n.prototype.onUpdate=function(){for(var t,e,i,n,d,g,_=this.pathStore.getItems(),y=this.pathStore.getPaths(),v=0,b=_.length;v<b;v++)(i=m.getNode(y[v]))&&(g=i.getComponents(),t=_[v],n=t.vectors,d=t.offsets,d.alignChanged&&o(i,g,d),d.mountPointChanged&&s(i,g,d),d.originChanged&&r(i,g,d),n.positionChanged&&a(i,g,n),n.rotationChanged&&h(i,g,n),n.scaleChanged&&u(i,g,n),(e=t.calculate(i))&&(c(i,g,t),e&f.LOCAL_CHANGED&&p(i,g,t.getLocalTransform()),e&f.WORLD_CHANGED&&l(i,g,t.getWorldTransform())))},e.exports=new n},{"./Dispatch":10,"./Path":14,"./PathStore":15,"./Transform":19}],21:[function(t,e,i){"use strict";function n(t,e){if(!t)throw new Error("DOMElement must be instantiated on a node");if(this._changeQueue=[],this._requestingUpdate=!1,this._renderSized=!1,this._requestRenderSize=!1,this._UIEvents=t.getUIEvents().slice(0),this._classes=["famous-dom-element"],this._requestingEventListeners=[],this._styles={},this._attributes={},this._content="",this._tagName=e&&e.tagName?e.tagName:"div",this._renderSize=[0,0,0],this._id=t?t.addComponent(this):null,this._node=t,this.onSizeModeChange.apply(this,t.getSizeMode()),this._callbacks=new o,this.setProperty("display",t.isShown()?"block":"none"),this.onOpacityChange(t.getOpacity()),e){var i,n;if(e.classes)for(i=0;i<e.classes.length;i++)this.addClass(e.classes[i]);if(e.attributes)for(n in e.attributes)this.setAttribute(n,e.attributes[n]);if(e.properties)for(n in e.properties)this.setProperty(n,e.properties[n]);e.id&&this.setId(e.id),e.content&&this.setContent(e.content),!1===e.cutout&&this.setCutoutState(e.cutout)}}var o=t("../utilities/CallbackStore"),s=t("../core/TransformSystem"),r=t("../core/Commands");n.prototype.getValue=function(){return{classes:this._classes,styles:this._styles,attributes:this._attributes,content:this._content,id:this._attributes.id,tagName:this._tagName}},n.prototype.onUpdate=function(){var t=this._node,e=this._changeQueue,i=e.length;if(i&&t){for(t.sendDrawCommand(r.WITH),t.sendDrawCommand(t.getLocation());i--;)t.sendDrawCommand(e.shift());this._requestRenderSize&&(t.sendDrawCommand(r.DOM_RENDER_SIZE),t.sendDrawCommand(t.getLocation()),this._requestRenderSize=!1)}this._requestingUpdate=!1},n.prototype.onMount=function(t,e){this._node=t,this._id=e,this._UIEvents=t.getUIEvents().slice(0),s.makeBreakPointAt(t.getLocation()),this.draw(),this.setAttribute("data-fa-path",t.getLocation())},n.prototype.onDismount=function(){this.setProperty("display","none"),this.setAttribute("data-fa-path",""),this.setCutoutState(!1),this.onUpdate(),this._initialized=!1},n.prototype.onShow=function(){this.setProperty("display","block")},n.prototype.onHide=function(){this.setProperty("display","none")},n.prototype.setCutoutState=function(t){return this._initialized&&this._changeQueue.push(r.GL_CUTOUT_STATE,t),this._requestingUpdate||this._requestUpdate(),this},n.prototype.onTransformChange=function(t){this._changeQueue.push(r.CHANGE_TRANSFORM),t=t.getLocalTransform();for(var e=0,i=t.length;e<i;e++)this._changeQueue.push(t[e]);this._requestingUpdate||this._requestUpdate()},n.prototype.onSizeChange=function(t,e){var i=this._node.getSizeMode(),n=2!==i[0],o=2!==i[1];return this._initialized&&this._changeQueue.push(r.CHANGE_SIZE,n?t:n,o?e:o),this._requestingUpdate||this._requestUpdate(),this},n.prototype.onOpacityChange=function(t){return this.setProperty("opacity",t)},n.prototype.onAddUIEvent=function(t){return-1===this._UIEvents.indexOf(t)?(this._subscribe(t),this._UIEvents.push(t)):this._inDraw&&this._subscribe(t),this},n.prototype.onRemoveUIEvent=function(t){var e=this._UIEvents.indexOf(t);return-1!==e?(this._unsubscribe(t),this._UIEvents.splice(e,1)):this._inDraw&&this._unsubscribe(t),this},n.prototype._subscribe=function(t){this._initialized&&this._changeQueue.push(r.SUBSCRIBE,t),this._requestingUpdate||this._requestUpdate()},n.prototype.preventDefault=function(t){this._initialized&&this._changeQueue.push(r.PREVENT_DEFAULT,t),this._requestingUpdate||this._requestUpdate()},n.prototype.allowDefault=function(t){this._initialized&&this._changeQueue.push(r.ALLOW_DEFAULT,t),this._requestingUpdate||this._requestUpdate()},n.prototype._unsubscribe=function(t){this._initialized&&this._changeQueue.push("UNSUBSCRIBE",t),this._requestingUpdate||this._requestUpdate()},n.prototype.onSizeModeChange=function(t,e,i){2!==t&&2!==e&&2!==i||(this._renderSized=!0,this._requestRenderSize=!0);var n=this._node.getSize();this.onSizeChange(n[0],n[1])},n.prototype.getRenderSize=function(){return this._renderSize},n.prototype._requestUpdate=function(){this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0)},n.prototype.init=function(){this._changeQueue.push(r.INIT_DOM,this._tagName),this._initialized=!0,this.onTransformChange(s.get(this._node.getLocation()));var t=this._node.getSize();this.onSizeChange(t[0],t[1]),this._requestingUpdate||this._requestUpdate()},n.prototype.setId=function(t){return this.setAttribute("id",t),this},n.prototype.addClass=function(t){return this._classes.indexOf(t)<0?(this._initialized&&this._changeQueue.push(r.ADD_CLASS,t),this._classes.push(t),this._requestingUpdate||this._requestUpdate(),this._renderSized&&(this._requestRenderSize=!0),this):(this._inDraw&&(this._initialized&&this._changeQueue.push(r.ADD_CLASS,t),this._requestingUpdate||this._requestUpdate()),this)},n.prototype.removeClass=function(t){var e=this._classes.indexOf(t);return e<0?this:(this._changeQueue.push(r.REMOVE_CLASS,t),this._classes.splice(e,1),this._requestingUpdate||this._requestUpdate(),this)},n.prototype.hasClass=function(t){return-1!==this._classes.indexOf(t)},n.prototype.setAttribute=function(t,e){return(this._attributes[t]!==e||this._inDraw)&&(this._attributes[t]=e,this._initialized&&this._changeQueue.push(r.CHANGE_ATTRIBUTE,t,e),this._requestUpdate||this._requestUpdate()),this},n.prototype.setProperty=function(t,e){return(this._styles[t]!==e||this._inDraw)&&(this._styles[t]=e,this._initialized&&this._changeQueue.push(r.CHANGE_PROPERTY,t,e),this._requestingUpdate||this._requestUpdate(),this._renderSized&&(this._requestRenderSize=!0)),this},n.prototype.setContent=function(t){return(this._content!==t||this._inDraw)&&(this._content=t,this._initialized&&this._changeQueue.push(r.CHANGE_CONTENT,t),this._requestingUpdate||this._requestUpdate(),this._renderSized&&(this._requestRenderSize=!0)),this},n.prototype.on=function(t,e){return this._callbacks.on(t,e)},n.prototype.onReceive=function(t,e){"resize"===t&&(this._renderSize[0]=e.val[0],this._renderSize[1]=e.val[1],this._requestingUpdate||this._requestUpdate()),this._callbacks.trigger(t,e)},n.prototype.draw=function(){var t,e,i;for(this._inDraw=!0,this.init(),e=0,i=this._classes.length;e<i;e++)this.addClass(this._classes[e]);this._content&&this.setContent(this._content);for(t in this._styles)null!=this._styles[t]&&this.setProperty(t,this._styles[t]);for(t in this._attributes)null!=this._attributes[t]&&this.setAttribute(t,this._attributes[t]);for(e=0,i=this._UIEvents.length;e<i;e++)this.onAddUIEvent(this._UIEvents[e]);this._inDraw=!1},e.exports=n},{"../core/Commands":9,"../core/TransformSystem":20,"../utilities/CallbackStore":46}],22:[function(t,e,i){"use strict";function n(t,e,i){var n=this;t.classList.add("famous-dom-renderer"),c=c||h("transform"),this._compositor=i,this._target=null,this._parent=null,this._path=null,this._children=[],this._root=new s(t,e),this._boundTriggerEvent=function(t){return n._triggerEvent(t)},this._selector=e,this._elements={},this._elements[e]=this._root,
this.perspectiveTransform=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._VPtransform=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._lastEv=null}function o(t){for(var e=[],i=t.target;i!==document.body;)e.push(i),i=i.parentNode;return e}var s=t("./ElementCache"),r=t("./Math"),a=t("../core/Path"),h=t("../utilities/vendorPrefix"),u=t("./events/EventMap"),c=null;n.prototype.subscribe=function(t){this._assertTargetLoaded(),this._listen(t),this._target.subscribe[t]=!0},n.prototype.unsubscribe=function(t){this._assertTargetLoaded(),this._listen(t),this._target.subscribe[t]=!1},n.prototype.preventDefault=function(t){this._assertTargetLoaded(),this._listen(t),this._target.preventDefault[t]=!0},n.prototype.allowDefault=function(t){this._assertTargetLoaded(),this._listen(t),this._target.preventDefault[t]=!1},n.prototype._listen=function(t){if(this._assertTargetLoaded(),!this._target.listeners[t]&&!this._root.listeners[t]){var e=u[t][1]?this._root:this._target;e.listeners[t]=this._boundTriggerEvent,e.element.addEventListener(t,this._boundTriggerEvent)}},n.prototype.unsubscribe=function(t){this._assertTargetLoaded(),this._target.subscribe[t]=!1},n.prototype._triggerEvent=function(t){if(this._lastEv!==t)for(var e=t.path?t.path:o(t),i=0;i<e.length;i++)if(e[i].dataset){var n=e[i].dataset.faPath;if(n&&(this._elements[n].preventDefault[t.type]&&t.preventDefault(),this._elements[n]&&this._elements[n].subscribe[t.type])){this._lastEv=t;var s=u[t.type][0];this._compositor.sendEvent(n,t.type,new s(t));break}}},n.prototype.getSizeOf=function(t){var e=this._elements[t];if(!e)return null;var i={val:e.size};return this._compositor.sendEvent(t,"resize",i),i},n.prototype.draw=function(t){t.perspectiveDirty&&(this.perspectiveDirty=!0,this.perspectiveTransform[0]=t.perspectiveTransform[0],this.perspectiveTransform[1]=t.perspectiveTransform[1],this.perspectiveTransform[2]=t.perspectiveTransform[2],this.perspectiveTransform[3]=t.perspectiveTransform[3],this.perspectiveTransform[4]=t.perspectiveTransform[4],this.perspectiveTransform[5]=t.perspectiveTransform[5],this.perspectiveTransform[6]=t.perspectiveTransform[6],this.perspectiveTransform[7]=t.perspectiveTransform[7],this.perspectiveTransform[8]=t.perspectiveTransform[8],this.perspectiveTransform[9]=t.perspectiveTransform[9],this.perspectiveTransform[10]=t.perspectiveTransform[10],this.perspectiveTransform[11]=t.perspectiveTransform[11],this.perspectiveTransform[12]=t.perspectiveTransform[12],this.perspectiveTransform[13]=t.perspectiveTransform[13],this.perspectiveTransform[14]=t.perspectiveTransform[14],this.perspectiveTransform[15]=t.perspectiveTransform[15]),(t.viewDirty||t.perspectiveDirty)&&(r.multiply(this._VPtransform,this.perspectiveTransform,t.viewTransform),this._root.element.style[c]=this._stringifyMatrix(this._VPtransform))},n.prototype._assertPathLoaded=function(){if(!this._path)throw new Error("path not loaded")},n.prototype._assertParentLoaded=function(){if(!this._parent)throw new Error("parent not loaded")},n.prototype._assertChildrenLoaded=function(){if(!this._children)throw new Error("children not loaded")},n.prototype._assertTargetLoaded=function(){if(!this._target)throw new Error("No target loaded")},n.prototype.findParent=function(){this._assertPathLoaded();for(var t,e=this._path;!t&&e.length;)e=e.substring(0,e.lastIndexOf("/")),t=this._elements[e];return this._parent=t,t},n.prototype.findTarget=function(){return this._target=this._elements[this._path],this._target},n.prototype.loadPath=function(t){return this._path=t,this._path},n.prototype.resolveChildren=function(t,e){for(var i,n,o=0,s=this._path;i=e.childNodes[o];)i.dataset?(n=i.dataset.faPath,n&&a.isDescendentOf(n,s)?t.appendChild(i):o++):o++},n.prototype.insertEl=function(t){if(!this._target||this._target.element.tagName.toLowerCase()!==t.toLowerCase()){if(this.findParent(),this._assertParentLoaded(),this._parent.void)throw new Error(this._parent.path+" is a void element. Void elements are not allowed to have children.");this._target&&this._parent.element.removeChild(this._target.element),this._target=new s(document.createElement(t),this._path);var e=this._target.element,i=this._parent.element;this.resolveChildren(e,i),this._parent.element.appendChild(this._target.element),this._elements[this._path]=this._target}},n.prototype.setProperty=function(t,e){this._assertTargetLoaded(),this._target.element.style[t]=e},n.prototype.setSize=function(t,e){this._assertTargetLoaded(),this.setWidth(t),this.setHeight(e)},n.prototype.setWidth=function(t){this._assertTargetLoaded();var e=this._target.content;!1===t?(this._target.explicitWidth=!0,e&&(e.style.width=""),t=e?e.offsetWidth:0,this._target.element.style.width=t+"px"):(this._target.explicitWidth=!1,e&&(e.style.width=t+"px"),this._target.element.style.width=t+"px"),this._target.size[0]=t},n.prototype.setHeight=function(t){this._assertTargetLoaded();var e=this._target.content;!1===t?(this._target.explicitHeight=!0,e&&(e.style.height=""),t=e?e.offsetHeight:0,this._target.element.style.height=t+"px"):(this._target.explicitHeight=!1,e&&(e.style.height=t+"px"),this._target.element.style.height=t+"px"),this._target.size[1]=t},n.prototype.setAttribute=function(t,e){this._assertTargetLoaded(),this._target.element.setAttribute(t,e)},n.prototype.setContent=function(t){this._assertTargetLoaded(),this._target.formElement?this._target.element.value=t:(this._target.content||(this._target.content=document.createElement("div"),this._target.content.classList.add("famous-dom-element-content"),this._target.element.insertBefore(this._target.content,this._target.element.firstChild)),this._target.content.innerHTML=t),this.setSize(!this._target.explicitWidth&&this._target.size[0],!this._target.explicitHeight&&this._target.size[1])},n.prototype.setMatrix=function(t){this._assertTargetLoaded(),this._target.element.style[c]=this._stringifyMatrix(t)},n.prototype.addClass=function(t){this._assertTargetLoaded(),this._target.element.classList.add(t)},n.prototype.removeClass=function(t){this._assertTargetLoaded(),this._target.element.classList.remove(t)},n.prototype._stringifyMatrix=function(t){var e="matrix3d(";return e+=t[0]<1e-6&&t[0]>-1e-6?"0,":t[0]+",",e+=t[1]<1e-6&&t[1]>-1e-6?"0,":t[1]+",",e+=t[2]<1e-6&&t[2]>-1e-6?"0,":t[2]+",",e+=t[3]<1e-6&&t[3]>-1e-6?"0,":t[3]+",",e+=t[4]<1e-6&&t[4]>-1e-6?"0,":t[4]+",",e+=t[5]<1e-6&&t[5]>-1e-6?"0,":t[5]+",",e+=t[6]<1e-6&&t[6]>-1e-6?"0,":t[6]+",",e+=t[7]<1e-6&&t[7]>-1e-6?"0,":t[7]+",",e+=t[8]<1e-6&&t[8]>-1e-6?"0,":t[8]+",",e+=t[9]<1e-6&&t[9]>-1e-6?"0,":t[9]+",",e+=t[10]<1e-6&&t[10]>-1e-6?"0,":t[10]+",",e+=t[11]<1e-6&&t[11]>-1e-6?"0,":t[11]+",",e+=t[12]<1e-6&&t[12]>-1e-6?"0,":t[12]+",",e+=t[13]<1e-6&&t[13]>-1e-6?"0,":t[13]+",",e+=t[14]<1e-6&&t[14]>-1e-6?"0,":t[14]+",",e+=t[15]+")"},e.exports=n},{"../core/Path":14,"../utilities/vendorPrefix":49,"./ElementCache":23,"./Math":24,"./events/EventMap":28}],23:[function(t,e,i){"use strict";function n(t,e){this.tagName=t.tagName.toLowerCase(),this.void=o[this.tagName];var i=t.constructor;this.formElement=i===HTMLInputElement||i===HTMLTextAreaElement||i===HTMLSelectElement,this.element=t,this.path=e,this.content=null,this.size=new Int16Array(3),this.explicitHeight=!1,this.explicitWidth=!1,this.postRenderSize=new Float32Array(2),this.listeners={},this.preventDefault={},this.subscribe={}}var o=t("./VoidElements");e.exports=n},{"./VoidElements":25}],24:[function(t,e,i){"use strict";function n(t,e){var i=e[0],n=e[1],o=e[2],s=e[3],r=e[4],a=e[5],h=e[6],u=e[7],c=e[8],p=e[9],l=e[10],d=e[11],f=e[12],m=e[13],g=e[14],_=e[15],y=i*a-n*r,v=i*h-o*r,b=i*u-s*r,T=n*h-o*a,E=n*u-s*a,w=o*u-s*h,S=c*m-p*f,C=c*g-l*f,I=c*_-d*f,O=p*g-l*m,R=p*_-d*m,N=l*_-d*g,A=y*N-v*R+b*O+T*I-E*C+w*S;return A?(A=1/A,t[0]=(a*N-h*R+u*O)*A,t[1]=(o*R-n*N-s*O)*A,t[2]=(m*w-g*E+_*T)*A,t[3]=(l*E-p*w-d*T)*A,t[4]=(h*I-r*N-u*C)*A,t[5]=(i*N-o*I+s*C)*A,t[6]=(g*b-f*w-_*v)*A,t[7]=(c*w-l*b+d*v)*A,t[8]=(r*R-a*I+u*S)*A,t[9]=(n*I-i*R-s*S)*A,t[10]=(f*E-m*b+_*y)*A,t[11]=(p*b-c*E-d*y)*A,t[12]=(a*C-r*O-h*S)*A,t[13]=(i*O-n*C+o*S)*A,t[14]=(m*v-f*T-g*y)*A,t[15]=(c*T-p*v+l*y)*A,t):null}function o(t,e,i){var n,o,s,r,a=e[0],h=e[1],u=e[2],c=e[3],p=e[4],l=e[5],d=e[6],f=e[7],m=e[8],g=e[9],_=e[10],y=e[11],v=e[12],b=e[13],T=e[14],E=e[15],w=i[0],S=i[1],C=i[2],I=i[3],O=i[4],R=i[5],N=i[6],A=i[7],L=i[8],M=i[9],D=i[10],x=i[11],P=i[12],U=i[13],z=i[14],F=i[15],k=!1;return n=w*a+S*p+C*m+I*v,o=w*h+S*l+C*g+I*b,s=w*u+S*d+C*_+I*T,r=w*c+S*f+C*y+I*E,k=k||n===t[0]||o===t[1]||s===t[2]||r===t[3],t[0]=n,t[1]=o,t[2]=s,t[3]=r,w=O,S=R,C=N,I=A,n=w*a+S*p+C*m+I*v,o=w*h+S*l+C*g+I*b,s=w*u+S*d+C*_+I*T,r=w*c+S*f+C*y+I*E,k=k||n===t[4]||o===t[5]||s===t[6]||r===t[7],t[4]=n,t[5]=o,t[6]=s,t[7]=r,w=L,S=M,C=D,I=x,n=w*a+S*p+C*m+I*v,o=w*h+S*l+C*g+I*b,s=w*u+S*d+C*_+I*T,r=w*c+S*f+C*y+I*E,k=k||n===t[8]||o===t[9]||s===t[10]||r===t[11],t[8]=n,t[9]=o,t[10]=s,t[11]=r,w=P,S=U,C=z,I=F,n=w*a+S*p+C*m+I*v,o=w*h+S*l+C*g+I*b,s=w*u+S*d+C*_+I*T,r=w*c+S*f+C*y+I*E,k=k||n===t[12]||o===t[13]||s===t[14]||r===t[15],t[12]=n,t[13]=o,t[14]=s,t[15]=r,t}e.exports={multiply:o,invert:n}},{}],25:[function(t,e,i){"use strict";var n={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};e.exports=n},{}],26:[function(t,e,i){"use strict";function n(t){o.call(this,t),this.data=t.data}var o=t("./UIEvent");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return"CompositionEvent"},e.exports=n},{"./UIEvent":34}],27:[function(t,e,i){"use strict";function n(t){this.type=t.type,this.defaultPrevented=t.defaultPrevented,this.timeStamp=t.timeStamp;var e=t.target.constructor;e!==HTMLInputElement&&e!==HTMLTextAreaElement&&e!==HTMLSelectElement||(this.value=t.target.value)}n.prototype.toString=function(){return"Event"},e.exports=n},{}],28:[function(t,e,i){"use strict";var n=t("./CompositionEvent"),o=t("./Event"),s=t("./FocusEvent"),r=t("./InputEvent"),a=t("./KeyboardEvent"),h=t("./MouseEvent"),u=t("./TouchEvent"),c=t("./UIEvent"),p=t("./WheelEvent"),l={change:[o,!0],submit:[o,!0],abort:[o,!1],beforeinput:[r,!0],blur:[s,!1],click:[h,!0],compositionend:[n,!0],compositionstart:[n,!0],compositionupdate:[n,!0],dblclick:[h,!0],focus:[s,!1],focusin:[s,!0],focusout:[s,!0],input:[r,!0],keydown:[a,!0],keyup:[a,!0],load:[o,!1],mousedown:[h,!0],mouseenter:[h,!1],mouseleave:[h,!1],mousemove:[h,!1],mouseout:[h,!0],mouseover:[h,!0],mouseup:[h,!0],resize:[c,!1],scroll:[c,!1],select:[o,!0],unload:[o,!1],wheel:[p,!0],touchcancel:[u,!0],touchend:[u,!0],touchmove:[u,!0],touchstart:[u,!0]};e.exports=l},{"./CompositionEvent":26,"./Event":27,"./FocusEvent":29,"./InputEvent":30,"./KeyboardEvent":31,"./MouseEvent":32,"./TouchEvent":33,"./UIEvent":34,"./WheelEvent":35}],29:[function(t,e,i){"use strict";function n(t){o.call(this,t)}var o=t("./UIEvent");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return"FocusEvent"},e.exports=n},{"./UIEvent":34}],30:[function(t,e,i){"use strict";function n(t){o.call(this,t),this.inputType=t.inputType,this.data=t.data,this.isComposing=t.isComposing,this.targetRange=t.targetRange}var o=t("./UIEvent");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return"InputEvent"},e.exports=n},{"./UIEvent":34}],31:[function(t,e,i){"use strict";function n(t){o.call(this,t),this.DOM_KEY_LOCATION_STANDARD=0,this.DOM_KEY_LOCATION_LEFT=1,this.DOM_KEY_LOCATION_RIGHT=2,this.DOM_KEY_LOCATION_NUMPAD=3,this.key=t.key,this.code=t.code,this.location=t.location,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.repeat=t.repeat,this.isComposing=t.isComposing,this.keyCode=t.keyCode}var o=t("./UIEvent");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return"KeyboardEvent"},e.exports=n},{"./UIEvent":34}],32:[function(t,e,i){"use strict";function n(t){o.call(this,t),this.screenX=t.screenX,this.screenY=t.screenY,this.clientX=t.clientX,this.clientY=t.clientY,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.button=t.button,this.buttons=t.buttons,this.pageX=t.pageX,this.pageY=t.pageY,this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY}var o=t("./UIEvent");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return"MouseEvent"},e.exports=n},{"./UIEvent":34}],33:[function(t,e,i){"use strict";function n(t){this.identifier=t.identifier,this.screenX=t.screenX,this.screenY=t.screenY,this.clientX=t.clientX,this.clientY=t.clientY,this.pageX=t.pageX,this.pageY=t.pageY}function o(t){if(!t)return a;for(var e=[],i=0;i<t.length;i++)e[i]=new n(t[i]);return e}function s(t){r.call(this,t),this.touches=o(t.touches),this.targetTouches=o(t.targetTouches),this.changedTouches=o(t.changedTouches),this.altKey=t.altKey,this.metaKey=t.metaKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey}var r=t("./UIEvent"),a=[];s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.toString=function(){return"TouchEvent"},e.exports=s},{"./UIEvent":34}],34:[function(t,e,i){"use strict";function n(t){o.call(this,t),this.detail=t.detail}var o=t("./Event");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return"UIEvent"},e.exports=n},{"./Event":27}],35:[function(t,e,i){"use strict";function n(t){o.call(this,t),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2,this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.deltaMode=t.deltaMode}var o=t("./MouseEvent");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return"WheelEvent"},e.exports=n},{"./MouseEvent":32}],36:[function(t,e,i){"use strict";var n=function(t,e){t instanceof Array||t instanceof Float32Array?(this.x=t[0]||0,this.y=t[1]||0):(this.x=t||0,this.y=e||0)};n.prototype.set=function(t,e){return null!=t&&(this.x=t),null!=e&&(this.y=e),this},n.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},n.prototype.scale=function(t){return t instanceof n?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=t),this},n.prototype.rotate=function(t){var e=this.x,i=this.y,n=Math.cos(t),o=Math.sin(t);return this.x=e*n-i*o,this.y=e*o+i*n,this},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y},n.prototype.cross=function(t){return this.x*t.y-this.y*t.x},n.prototype.invert=function(){return this.x*=-1,this.y*=-1,this},n.prototype.map=function(t){return this.x=t(this.x),this.y=t(this.y),this},n.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},n.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},n.prototype.clear=function(){return this.x=0,this.y=0,this},n.prototype.isZero=function(){return 0===this.x&&0===this.y},n.prototype.toArray=function(){return[this.x,this.y]},n.normalize=function(t,e){var i=t.x,n=t.y,o=Math.sqrt(i*i+n*n)||1;return o=1/o,e.x=t.x*o,e.y=t.y*o,e},n.clone=function(t){return new n(t.x,t.y)},n.add=function(t,e,i){return i.x=t.x+e.x,i.y=t.y+e.y,i},n.subtract=function(t,e,i){return i.x=t.x-e.x,i.y=t.y-e.y,i},n.scale=function(t,e,i){return i.x=t.x*e,i.y=t.y*e,i},n.dot=function(t,e){return t.x*e.x+t.y*e.y},n.cross=function(t,e){return t.x*e.y-t.y*e.x},e.exports=n},{}],37:[function(t,e,i){"use strict";var n,o,s=0,r=["ms","moz","webkit","o"];if("object"==typeof window){n=window.requestAnimationFrame,o=window.cancelAnimationFrame||window.cancelRequestAnimationFrame;for(var a=0;a<r.length&&!n;++a)n=window[r[a]+"RequestAnimationFrame"],o=window[r[a]+"CancelRequestAnimationFrame"]||window[r[a]+"CancelAnimationFrame"];n&&!o&&(n=null)}if(!n){var h=Date.now?Date.now:function(){return(new Date).getTime()};n=function(t){var e=h(),i=Math.max(0,16-(e-s)),n=setTimeout(function(){t(e+i)},i);return s=e+i,n},o=function(t){clearTimeout(t)}}var u={requestAnimationFrame:n,cancelAnimationFrame:o};e.exports=u},{}],38:[function(t,e,i){"use strict";e.exports={requestAnimationFrame:t("./animationFrame").requestAnimationFrame,cancelAnimationFrame:t("./animationFrame").cancelAnimationFrame}},{"./animationFrame":37}],39:[function(t,e,i){"use strict";function n(){var t=this;this._updates=[],this._looper=function(e){t.loop(e)},this._time=0,this._stoppedAt=0,this._sleep=0,this._startOnVisibilityChange=!0,this._rAF=null,this._sleepDiff=!0,this.start(),a&&document.addEventListener(u,function(){t._onVisibilityChange()})}var o=t("../polyfills"),s=o.requestAnimationFrame,r=o.cancelAnimationFrame,a="undefined"!=typeof document;if(a){var h,u;void 0!==document.hidden?(h="hidden",u="visibilitychange"):void 0!==document.mozHidden?(h="mozHidden",u="mozvisibilitychange"):void 0!==document.msHidden?(h="msHidden",u="msvisibilitychange"):void 0!==document.webkitHidden&&(h="webkitHidden",u="webkitvisibilitychange")}n.prototype._onVisibilityChange=function(){document[h]?this._onUnfocus():this._onFocus()},n.prototype._onFocus=function(){this._startOnVisibilityChange&&this._start()},n.prototype._onUnfocus=function(){this._stop()},n.prototype.start=function(){return this._running||(this._startOnVisibilityChange=!0,this._start()),this},n.prototype._start=function(){this._running=!0,this._sleepDiff=!0,this._rAF=s(this._looper)},n.prototype.stop=function(){return this._running&&(this._startOnVisibilityChange=!1,this._stop()),this},n.prototype._stop=function(){this._running=!1,this._stoppedAt=this._time,r(this._rAF)},n.prototype.isRunning=function(){return this._running},n.prototype.step=function(t){this._time=t,this._sleepDiff&&(this._sleep+=t-this._stoppedAt,this._sleepDiff=!1);for(var e=t-this._sleep,i=0,n=this._updates.length;i<n;i++)this._updates[i].update(e);return this},n.prototype.loop=function(t){return this.step(t),this._rAF=s(this._looper),this},n.prototype.update=function(t){return-1===this._updates.indexOf(t)&&this._updates.push(t),this},n.prototype.noLongerUpdate=function(t){var e=this._updates.indexOf(t);return e>-1&&this._updates.splice(e,1),this},e.exports=n},{"../polyfills":38}],40:[function(t,e,i){"use strict";function n(){s(),this._contexts={},this._outCommands=[],this._inCommands=[],this._time=null,this._resized=!1;var t=this;window.addEventListener("resize",function(){t.onResize()})}var o=t("./Context"),s=t("./inject-css"),r=t("../core/Commands");n.prototype.onResize=function(){this._resized=!0;for(var t in this._contexts)this._contexts[t].updateSize()},n.prototype.getTime=function(){return this._time},n.prototype.sendEvent=function(t,e,i){this._outCommands.push(r.WITH,t,r.TRIGGER,e,i)},n.prototype.sendResize=function(t,e){this.sendEvent(t,"CONTEXT_RESIZE",e)},n.prototype.handleWith=function(t,e){var i=e[t],n=i.split("/");return this.getOrSetContext(n.shift()).receive(i,e,t)},n.prototype.getOrSetContext=function(t){if(this._contexts[t])return this._contexts[t];var e=new o(t,this);return this._contexts[t]=e,e},n.prototype.getContext=function(t){if(this._contexts[t])return this._contexts[t]},n.prototype.drawCommands=function(){for(var t=this._inCommands,e=0,i=t[e];i;){switch(i){case r.TIME:this._time=t[++e];break;case r.WITH:e=this.handleWith(++e,t);break;case r.NEED_SIZE_FOR:this.giveSizeFor(++e,t)}i=t[++e]}for(var n in this._contexts)this._contexts[n].draw();return this._resized&&this.updateSize(),this._outCommands},n.prototype.updateSize=function(){for(var t in this._contexts)this._contexts[t].updateSize()},n.prototype.receiveCommands=function(t){for(var e=t.length,i=0;i<e;i++)this._inCommands.push(t[i]);for(var n in this._contexts)this._contexts[n].checkInit()},n.prototype.giveSizeFor=function(t,e){var i=e[t],n=this.getOrSetContext(i).getRootSize();this.sendResize(i,n)},n.prototype.clearCommands=function(){this._inCommands.length=0,this._outCommands.length=0,this._resized=!1},e.exports=n},{"../core/Commands":9,"./Context":41,"./inject-css":43}],41:[function(t,e,i){"use strict";function n(t,e){if(this._compositor=e,this._rootEl=document.querySelector(t),this._selector=t,null===this._rootEl)throw new Error('Failed to create Context: No matches for "'+t+'" found.');this._selector=t,this._initDOMRenderer(),this._webGLRenderer=null,this._domRenderer=new D(this._domRendererRootEl,t,e),this._canvasEl=null,this._renderState={projectionType:M.ORTHOGRAPHIC_PROJECTION,perspectiveTransform:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),viewTransform:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),viewDirty:!1,perspectiveDirty:!1},this._size=[],this._meshTransform=new Float32Array(16),this._meshSize=[0,0,0],this._initDOM=!1,this._commandCallbacks=[],this.initCommandCallbacks(),this.updateSize()}function o(t,e,i,n){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.preventDefault(i[++n]),n}function s(t,e,i,n){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.allowDefault(i[++n]),n}function r(t,e,i,n){return t._initDOM=!0,n}function a(t,e,i,n){return t._domRenderer.insertEl(i[++n]),n}function h(t,e,i,n){return t._domRenderer.getSizeOf(i[++n]),n}function u(t,e,i,n){var o=t._meshTransform;return o[0]=i[++n],o[1]=i[++n],o[2]=i[++n],o[3]=i[++n],o[4]=i[++n],o[5]=i[++n],o[6]=i[++n],o[7]=i[++n],o[8]=i[++n],o[9]=i[++n],o[10]=i[++n],o[11]=i[++n],o[12]=i[++n],o[13]=i[++n],o[14]=i[++n],o[15]=i[++n],t._domRenderer.setMatrix(o),t._webGLRenderer&&t._webGLRenderer.setCutoutUniform(e,"u_transform",o),n}function c(t,e,i,n){var o=i[++n],s=i[++n];return t._domRenderer.setSize(o,s),t._webGLRenderer&&(t._meshSize[0]=o,t._meshSize[1]=s,t._webGLRenderer.setCutoutUniform(e,"u_size",t._meshSize)),n}function p(t,e,i,n){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.setProperty(i[++n],i[++n]),n}function l(t,e,i,n){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.setContent(i[++n]),n}function d(t,e,i,n){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.setAttribute(i[++n],i[++n]),n}function f(t,e,i,n){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.addClass(i[++n]),n}function m(t,e,i,n){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.removeClass(i[++n]),n}function g(t,e,i,n){return t._webGLRenderer&&t._webGLRenderer.getOrSetCutout(e),t._domRenderer.subscribe(i[++n]),n}function _(t,e,i,n){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setMeshOptions(e,i[++n]),n}function y(t,e,i,n){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setAmbientLightColor(e,i[++n],i[++n],i[++n]),n}function v(t,e,i,n){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setLightPosition(e,i[++n],i[++n],i[++n]),n}function b(t,e,i,n){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setLightColor(e,i[++n],i[++n],i[++n]),n}function T(t,e,i,n){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.handleMaterialInput(e,i[++n],i[++n]),n}function E(t,e,i,n){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setGeometry(e,i[++n],i[++n],i[++n]),n}function w(t,e,i,n){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setMeshUniform(e,i[++n],i[++n]),n}function S(t,e,i,n){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.bufferData(e,i[++n],i[++n],i[++n],i[++n],i[++n]),n}function C(t,e,i,n){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setCutoutState(e,i[++n]),n}function I(t,e,i,n){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.setMeshVisibility(e,i[++n]),n}function O(t,e,i,n){return t._webGLRenderer||t._initWebGLRenderer(),t._webGLRenderer.removeMesh(e),n}function R(t,e,i,n){return t._renderState.projectionType=M.PINHOLE_PROJECTION,t._renderState.perspectiveTransform[11]=-1/i[++n],t._renderState.perspectiveDirty=!0,n}function N(t,e,i,n){return t._renderState.projectionType=M.ORTHOGRAPHIC_PROJECTION,t._renderState.perspectiveTransform[11]=0,t._renderState.perspectiveDirty=!0,n}function A(t,e,i,n){return t._renderState.viewTransform[0]=i[++n],t._renderState.viewTransform[1]=i[++n],t._renderState.viewTransform[2]=i[++n],t._renderState.viewTransform[3]=i[++n],t._renderState.viewTransform[4]=i[++n],t._renderState.viewTransform[5]=i[++n],t._renderState.viewTransform[6]=i[++n],t._renderState.viewTransform[7]=i[++n],t._renderState.viewTransform[8]=i[++n],t._renderState.viewTransform[9]=i[++n],t._renderState.viewTransform[10]=i[++n],t._renderState.viewTransform[11]=i[++n],t._renderState.viewTransform[12]=i[++n],t._renderState.viewTransform[13]=i[++n],t._renderState.viewTransform[14]=i[++n],t._renderState.viewTransform[15]=i[++n],t._renderState.viewDirty=!0,n}var L=t("../webgl-renderers/WebGLRenderer"),M=t("../components/Camera"),D=t("../dom-renderers/DOMRenderer"),x=t("../core/Commands");n.prototype.updateSize=function(){var t=this._rootEl.offsetWidth,e=this._rootEl.offsetHeight;return this._size[0]=t,this._size[1]=e,this._size[2]=t>e?t:e,this._compositor.sendResize(this._selector,this._size),this._webGLRenderer&&this._webGLRenderer.updateSize(this._size),this},n.prototype.draw=function(){this._domRenderer.draw(this._renderState),this._webGLRenderer&&this._webGLRenderer.draw(this._renderState),this._renderState.perspectiveDirty&&(this._renderState.perspectiveDirty=!1),this._renderState.viewDirty&&(this._renderState.viewDirty=!1)},n.prototype._initDOMRenderer=function(){this._domRendererRootEl=document.createElement("div"),this._rootEl.appendChild(this._domRendererRootEl),this._domRendererRootEl.style.display="none",this._domRenderer=new D(this._domRendererRootEl,this._selector,this._compositor)},n.prototype.getRootSize=function(){return[this._rootEl.offsetWidth,this._rootEl.offsetHeight]},n.prototype.initCommandCallbacks=function(){this._commandCallbacks[x.INIT_DOM]=a,this._commandCallbacks[x.DOM_RENDER_SIZE]=h,this._commandCallbacks[x.CHANGE_TRANSFORM]=u,this._commandCallbacks[x.CHANGE_SIZE]=c,this._commandCallbacks[x.CHANGE_PROPERTY]=p,this._commandCallbacks[x.CHANGE_CONTENT]=l,this._commandCallbacks[x.CHANGE_ATTRIBUTE]=d,this._commandCallbacks[x.ADD_CLASS]=f,this._commandCallbacks[x.REMOVE_CLASS]=m,this._commandCallbacks[x.SUBSCRIBE]=g,this._commandCallbacks[x.GL_SET_DRAW_OPTIONS]=_,this._commandCallbacks[x.GL_AMBIENT_LIGHT]=y,this._commandCallbacks[x.GL_LIGHT_POSITION]=v,this._commandCallbacks[x.GL_LIGHT_COLOR]=b,this._commandCallbacks[x.MATERIAL_INPUT]=T,this._commandCallbacks[x.GL_SET_GEOMETRY]=E,this._commandCallbacks[x.GL_UNIFORMS]=w,this._commandCallbacks[x.GL_BUFFER_DATA]=S,this._commandCallbacks[x.GL_CUTOUT_STATE]=C,this._commandCallbacks[x.GL_MESH_VISIBILITY]=I,this._commandCallbacks[x.GL_REMOVE_MESH]=O,this._commandCallbacks[x.PINHOLE_PROJECTION]=R,this._commandCallbacks[x.ORTHOGRAPHIC_PROJECTION]=N,this._commandCallbacks[x.CHANGE_VIEW_TRANSFORM]=A,this._commandCallbacks[x.PREVENT_DEFAULT]=o,this._commandCallbacks[x.ALLOW_DEFAULT]=s,this._commandCallbacks[x.READY]=r},n.prototype._initWebGLRenderer=function(){this._webGLRendererRootEl=document.createElement("canvas"),this._rootEl.appendChild(this._webGLRendererRootEl),this._webGLRenderer=new L(this._webGLRendererRootEl,this._compositor),this._webGLRenderer.updateSize(this._size)},n.prototype.getRootSize=function(){return[this._rootEl.offsetWidth,this._rootEl.offsetHeight]},n.prototype.checkInit=function(){this._initDOM&&(this._domRendererRootEl.style.display="block",this._initDOM=!1)},n.prototype.receive=function(t,e,i){var n=i,o=e[++n];for(this._domRenderer.loadPath(t),this._domRenderer.findTarget();null!=o;){if(o===x.WITH||o===x.TIME)return n-1;n=this._commandCallbacks[o](this,t,e,n)+1,o=e[n]}return n},n.prototype.getDOMRenderer=function(){return this._domRenderer},n.prototype.getWebGLRenderer=function(){return this._webGLRenderer},e.exports=n},{"../components/Camera":2,"../core/Commands":9,"../dom-renderers/DOMRenderer":22,"../webgl-renderers/WebGLRenderer":56}],42:[function(t,e,i){"use strict";function n(t,e,i){this._thread=t,this._compositor=e,this._renderLoop=i,this._renderLoop.update(this);var n=this;this._thread.onmessage=function(t){var e=t.data?t.data:t;if(e[0]===o.ENGINE)switch(e[1]){case o.START:n._engine.start();break;case o.STOP:n._engine.stop();break;default:console.error('Unknown ENGINE command "'+e[1]+'"')}else n._compositor.receiveCommands(e)},this._thread.onerror=function(t){console.error(t)}}var o=t("../core/Commands");n.prototype.getThread=function(){return this._thread},n.prototype.getCompositor=function(){return this._compositor},n.prototype.getEngine=function(){return this._renderLoop},n.prototype.getRenderLoop=function(){return this._renderLoop},n.prototype.update=function(t){this._thread.postMessage([o.FRAME,t]);var e=this._compositor.drawCommands();this._thread.postMessage(e),this._compositor.clearCommands()},e.exports=n},{"../core/Commands":9}],43:[function(t,e,i){"use strict";function n(){if(!s)if(s=!0,document.createStyleSheet){var t=document.createStyleSheet();t.cssText=o}else{var e=document.getElementsByTagName("head")[0],i=document.createElement("style");i.styleSheet?i.styleSheet.cssText=o:i.appendChild(document.createTextNode(o)),(e||document.documentElement).appendChild(i)}}var o=".famous-dom-renderer {width:100%;height:100%;transform-style:preserve-3d;-webkit-transform-style:preserve-3d;}.famous-dom-element {-webkit-transform-origin:0% 0%;transform-origin:0% 0%;-webkit-backface-visibility:visible;backface-visibility:visible;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-tap-highlight-color:transparent;pointer-events:auto;z-index:1;}.famous-dom-element-content,.famous-dom-element {position:absolute;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;}.famous-webgl-renderer {-webkit-transform:translateZ(1000000px);transform:translateZ(1000000px);pointer-events:none;position:absolute;z-index:1;top:0;width:100%;height:100%;}",s="undefined"==typeof document;e.exports=n},{}],44:[function(t,e,i){"use strict";var n={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return t<=.5?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t},inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var e=1.70158,i=0;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1),-1*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},outElastic:function(t){var e=1.70158,i=0;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1),1*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1)},inOutElastic:function(t){var e=1.70158,i=0;return 0===t?0:2==(t/=.5)?1:(i||(i=.3*1.5),e=i/(2*Math.PI)*Math.asin(1),t<1?1*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*-.5:1*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)},inBack:function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)},
outBack:function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1},inOutBack:function(t,e){return void 0===e&&(e=1.70158),(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},inBounce:function(t){return 1-n.outBounce(1-t)},outBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return t<.5?.5*n.inBounce(2*t):.5*n.outBounce(2*t-1)+.5},flat:function(){return 0}};e.exports=n},{}],45:[function(t,e,i){"use strict";function n(t){this._queue=[],this._from=null,this._state=null,this._startedAt=null,this._pausedAt=null,null!=t&&this.from(t)}var o=t("./Curves"),s=t("../core/FamousEngine");n.Clock=s.getClock(),n.prototype.to=function(t,e,i,n,s){return e=null!=e&&e.constructor===String?o[e]:e,0===this._queue.length&&(this._startedAt=this.constructor.Clock.now(),this._pausedAt=null),this._queue.push(t,null!=e?e:o.linear,null!=i?i:100,n,s),this},n.prototype.from=function(t){return this._state=t,this._from=this._sync(null,this._state),this._queue.length=0,this._startedAt=this.constructor.Clock.now(),this._pausedAt=null,this},n.prototype.delay=function(t,e){var i=this._queue.length>0?this._queue[this._queue.length-5]:this._state;return this.to(i,o.flat,t,e)},n.prototype.override=function(t,e,i,n,s){return this._queue.length>0&&(null!=t&&(this._queue[0]=t),null!=e&&(this._queue[1]=e.constructor===String?o[e]:e),null!=i&&(this._queue[2]=i),null!=n&&(this._queue[3]=n),null!=s&&(this._queue[4]=s)),this},n.prototype._interpolate=function(t,e,i,n,o){if(i instanceof Object)if("slerp"===o){var s,r,a,h,u,c,p,l,d,f,m,g,_;if(s=e[0],r=e[1],a=e[2],h=e[3],u=i[0],c=i[1],p=i[2],l=i[3],1===n)return t[0]=u,t[1]=c,t[2]=p,t[3]=l,t;f=h*l+s*u+r*c+a*p,1-f>1e-5?(d=Math.acos(f),m=Math.sin(d),g=Math.sin((1-n)*d)/m,_=Math.sin(n*d)/m):(g=1-n,_=n),t[0]=s*g+u*_,t[1]=r*g+c*_,t[2]=a*g+p*_,t[3]=h*g+l*_}else if(i instanceof Array)for(var y=0,v=i.length;y<v;y++)t[y]=this._interpolate(t[y],e[y],i[y],n,o);else for(var b in i)t[b]=this._interpolate(t[b],e[b],i[b],n,o);else t=e+n*(i-e);return t},n.prototype._sync=function t(e,i){if("number"==typeof i)e=i;else if(i instanceof Array){null==e&&(e=[]);for(var n=0,o=i.length;n<o;n++)e[n]=t(e[n],i[n])}else if(i instanceof Object){null==e&&(e={});for(var s in i)e[s]=t(e[s],i[s])}return e},n.prototype.get=function(t){if(0===this._queue.length)return this._state;t=this._pausedAt?this._pausedAt:t,t=t||this.constructor.Clock.now();var e=(t-this._startedAt)/this._queue[2];this._state=this._interpolate(this._state,this._from,this._queue[0],this._queue[1](e>1?1:e),this._queue[4]);var i=this._state;if(e>=1){this._startedAt=this._startedAt+this._queue[2],this._from=this._sync(this._from,this._state),this._queue.shift(),this._queue.shift(),this._queue.shift();var n=this._queue.shift();this._queue.shift(),n&&n()}return e>1?this.get():i},n.prototype.isActive=function(){return this._queue.length>0},n.prototype.halt=function(){return this.from(this.get())},n.prototype.pause=function(){return this._pausedAt=this.constructor.Clock.now(),this},n.prototype.isPaused=function(){return!!this._pausedAt},n.prototype.resume=function(){var t=this._pausedAt-this._startedAt;return this._startedAt=this.constructor.Clock.now()-t,this._pausedAt=null,this},n.prototype.reset=function(t){return this.from(t)},n.prototype.set=function(t,e,i){return null==e?(this.from(t),i&&i()):this.to(t,e.curve,e.duration,i,e.method),this},e.exports=n},{"../core/FamousEngine":12,"./Curves":44}],46:[function(t,e,i){"use strict";function n(){this._events={}}n.prototype.on=function(t,e){this._events[t]||(this._events[t]=[]);var i=this._events[t];return i.push(e),function(){i.splice(i.indexOf(e),1)}},n.prototype.off=function(t,e){var i=this._events[t];return i&&i.splice(i.indexOf(e),1),this},n.prototype.trigger=function(t,e){var i=this._events[t];if(i)for(var n=0,o=i.length;n<o;n++)i[n](e);return this},e.exports=n},{}],47:[function(t,e,i){"use strict";var n=function t(e){var i;if("object"==typeof e){i=e instanceof Array?[]:{};for(var n in e)if("object"==typeof e[n]&&null!==e[n])if(e[n]instanceof Array){i[n]=new Array(e[n].length);for(var o=0;o<e[n].length;o++)i[n][o]=t(e[n][o])}else i[n]=t(e[n]);else i[n]=e[n]}else i=e;return i};e.exports=n},{}],48:[function(t,e,i){"use strict";e.exports=function(t){var e=[],i=[],n=0;for(var o in t)t.hasOwnProperty(o)&&(e[n]=o,i[n]=t[o],n++);return{keys:e,values:i}}},{}],49:[function(t,e,i){"use strict";function n(t){for(var e=0;e<o.length;e++){var i=o[e]+t;if(""===document.documentElement.style[i])return i}return t}var o=["","-ms-","-webkit-","-moz-","-o-"];e.exports=n},{}],50:[function(t,e,i){"use strict";function n(t,e,i){this.buffer=null,this.target=t,this.type=e,this.data=[],this.gl=i}n.prototype.subData=function(){for(var t=this.gl,e=[],i=0;i<this.data.length;i+=1e4)e=Array.prototype.concat.apply(e,this.data.slice(i,i+1e4));this.buffer=this.buffer||t.createBuffer(),t.bindBuffer(this.target,this.buffer),t.bufferData(this.target,new this.type(e),t.STATIC_DRAW)},e.exports=n},{}],51:[function(t,e,i){"use strict";function n(t){this.gl=t,this.registry={},this._dynamicBuffers=[],this._staticBuffers=[],this._arrayBufferMax=3e4,this._elementBufferMax=3e4}var o=t("./Buffer");n.prototype.allocate=function(t,e,i,n,s){var r,a,h,u,c=this.registry[t]||(this.registry[t]={keys:[],values:[],spacing:[],offset:[],length:[]}),p=c.keys.indexOf(e),l="indices"===e,d=!1,f=0;if(-1===p){if(p=c.keys.length,a=l?i.length:Math.floor(i.length/n),s)h=new o(l?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,l?Uint16Array:Float32Array,this.gl),this._dynamicBuffers.push({buffer:h,offset:i.length,isIndex:l});else{for(u=0;u<this._staticBuffers.length;u++)if(l===this._staticBuffers[u].isIndex&&(r=this._staticBuffers[u].offset+i.length,!l&&r<this._arrayBufferMax||l&&r<this._elementBufferMax)){h=this._staticBuffers[u].buffer,f=this._staticBuffers[u].offset,this._staticBuffers[u].offset+=i.length,d=!0;break}d||(h=new o(l?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,l?Uint16Array:Float32Array,this.gl),this._staticBuffers.push({buffer:h,offset:i.length,isIndex:l}))}c.keys.push(e),c.values.push(h),c.spacing.push(n),c.offset.push(f),c.length.push(a)}var m=i.length;for(u=0;u<m;u++)c.values[p].data[f+u]=i[u];c.values[p].subData()},e.exports=n},{"./Buffer":50}],52:[function(t,e,i){"use strict";function n(t,e){return function(){var i=t.apply(this,arguments);return e.apply(this,arguments),i}}function o(t,e){var i=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(i),i.textContent="body,html{background:#e3e3e3;font-family:monaco,monospace;font-size:14px;line-height:1.7em}#shaderReport{left:0;top:0;right:0;box-sizing:border-box;position:absolute;z-index:1000;color:#222;padding:15px;white-space:normal;list-style-type:none;margin:50px auto;max-width:1200px}#shaderReport li{background-color:#fff;margin:13px 0;box-shadow:0 1px 2px rgba(0,0,0,.15);padding:20px 30px;border-radius:2px;border-left:20px solid #e01111}span{color:#e01111;text-decoration:underline;font-weight:700}#shaderReport li p{padding:0;margin:0}#shaderReport li:nth-child(even){background-color:#f4f4f4}#shaderReport li p:first-child{margin-bottom:10px;color:#666}";var n=document.createElement("ul");n.setAttribute("id","shaderReport"),document.body.appendChild(n);for(var o,s=/ERROR: [\d]+:([\d]+): (.+)/gim,r=e.split("\n");null!=(o=s.exec(t));){o.index===s.lastIndex&&s.lastIndex++;var a=document.createElement("li"),h='<p><span>ERROR</span> "'+o[2]+'" in line '+o[1]+"</p>";h+="<p><b>"+r[o[1]-1].replace(/^[ \t]+/g,"")+"</b></p>",a.innerHTML=h,n.appendChild(a)}}e.exports=function(){return n(this.gl.compileShader,function(t){this.getShaderParameter(t,this.COMPILE_STATUS)||o(this.getShaderInfoLog(t),this.getShaderSource(t))})}},{}],53:[function(t,e,i){"use strict";function n(t,e){this.gl=t,this.textureSlots=1,this.options=e||{},this.registeredMaterials={},this.flaggedUniforms=[],this.cachedUniforms={},this.uniformTypes=[],this.definitionVec4=[],this.definitionVec3=[],this.definitionFloat=[],this.applicationVec3=[],this.applicationVec4=[],this.applicationFloat=[],this.applicationVert=[],this.definitionVert=[],this.resetProgram()}var o=t("../utilities/clone"),s=t("../utilities/keyValueToArrays"),r=t("../webgl-shaders").vertex,a=t("../webgl-shaders").fragment,h=t("./Debug"),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c="precision mediump float;\n",p={undefined:"float ",1:"float ",2:"vec2 ",3:"vec3 ",4:"vec4 ",16:"mat4 "},l={u_baseColor:"vec4",u_normals:"vert",u_glossiness:"vec4",u_positionOffset:"vert"},d={vert:1,vec3:2,vec4:4,float:8},f=s({u_perspective:u,u_view:u,u_resolution:[0,0,0],u_transform:u,u_size:[1,1,1],u_time:0,u_opacity:1,u_metalness:0,u_glossiness:[0,0,0,0],u_baseColor:[1,1,1,1],u_normals:[1,1,1],u_positionOffset:[0,0,0],u_lightPosition:u,u_lightColor:u,u_ambientLight:[0,0,0],u_flatShading:0,u_numLights:0}),m=s({a_pos:[0,0,0],a_texCoord:[0,0],a_normals:[0,0,0]}),g=s({v_textureCoordinate:[0,0],v_normal:[0,0,0],v_position:[0,0,0],v_eyeVector:[0,0,0]});n.prototype.registerMaterial=function(t,e){var i=e,n=l[t],o=d[n];if((this.registeredMaterials[e._id]&o)===o)return this;var s;for(s in i.uniforms)-1===f.keys.indexOf(s)&&(f.keys.push(s),f.values.push(i.uniforms[s]));for(s in i.varyings)-1===g.keys.indexOf(s)&&(g.keys.push(s),g.values.push(i.varyings[s]));for(s in i.attributes)-1===m.keys.indexOf(s)&&(m.keys.push(s),m.values.push(i.attributes[s]));return this.registeredMaterials[e._id]|=o,"float"===n&&(this.definitionFloat.push(e.defines),this.definitionFloat.push("float fa_"+e._id+"() {\n "+i.glsl+" \n}"),this.applicationFloat.push("if (int(abs(ID)) == "+e._id+") return fa_"+e._id+"();")),"vec3"===n&&(this.definitionVec3.push(e.defines),this.definitionVec3.push("vec3 fa_"+e._id+"() {\n "+i.glsl+" \n}"),this.applicationVec3.push("if (int(abs(ID.x)) == "+e._id+") return fa_"+e._id+"();")),"vec4"===n&&(this.definitionVec4.push(e.defines),this.definitionVec4.push("vec4 fa_"+e._id+"() {\n "+i.glsl+" \n}"),this.applicationVec4.push("if (int(abs(ID.x)) == "+e._id+") return fa_"+e._id+"();")),"vert"===n&&(this.definitionVert.push(e.defines),this.definitionVert.push("vec3 fa_"+e._id+"() {\n "+i.glsl+" \n}"),this.applicationVert.push("if (int(abs(ID.x)) == "+e._id+") return fa_"+e._id+"();")),this.resetProgram()},n.prototype.resetProgram=function(){var t,e,i,n,s,h,u=[c],l=[c];for(this.uniformLocations=[],this.attributeLocations={},this.uniformTypes={},this.attributeNames=o(m.keys),this.attributeValues=o(m.values),this.varyingNames=o(g.keys),this.varyingValues=o(g.values),this.uniformNames=o(f.keys),this.uniformValues=o(f.values),this.flaggedUniforms=[],this.cachedUniforms={},l.push("uniform sampler2D u_textures[7];\n"),this.applicationVert.length&&u.push("uniform sampler2D u_textures[7];\n"),h=0;h<this.uniformNames.length;h++)n=this.uniformNames[h],s=this.uniformValues[h],u.push("uniform "+p[s.length]+n+";\n"),l.push("uniform "+p[s.length]+n+";\n");for(h=0;h<this.attributeNames.length;h++)n=this.attributeNames[h],s=this.attributeValues[h],u.push("attribute "+p[s.length]+n+";\n");for(h=0;h<this.varyingNames.length;h++)n=this.varyingNames[h],s=this.varyingValues[h],u.push("varying "+p[s.length]+n+";\n"),l.push("varying "+p[s.length]+n+";\n");e=u.join("")+r.replace("#vert_definitions",this.definitionVert.join("\n")).replace("#vert_applications",this.applicationVert.join("\n")),t=l.join("")+a.replace("#vec3_definitions",this.definitionVec3.join("\n")).replace("#vec3_applications",this.applicationVec3.join("\n")).replace("#vec4_definitions",this.definitionVec4.join("\n")).replace("#vec4_applications",this.applicationVec4.join("\n")).replace("#float_definitions",this.definitionFloat.join("\n")).replace("#float_applications",this.applicationFloat.join("\n")),i=this.gl.createProgram(),this.gl.attachShader(i,this.compileShader(this.gl.createShader(35633),e)),this.gl.attachShader(i,this.compileShader(this.gl.createShader(35632),t)),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS)?(this.program=i,this.gl.useProgram(this.program)):(console.error("link error: "+this.gl.getProgramInfoLog(i)),this.program=null),this.setUniforms(this.uniformNames,this.uniformValues);var d=this.gl.getUniformLocation(this.program,"u_textures[0]");return this.gl.uniform1iv(d,[0,1,2,3,4,5,6]),this},n.prototype.uniformIsCached=function(t,e){if(null==this.cachedUniforms[t])return e.length?this.cachedUniforms[t]=new Float32Array(e):this.cachedUniforms[t]=e,!1;if(e.length){for(var i=e.length;i--;)if(e[i]!==this.cachedUniforms[t][i]){for(i=e.length;i--;)this.cachedUniforms[t][i]=e[i];return!1}}else if(this.cachedUniforms[t]!==e)return this.cachedUniforms[t]=e,!1;return!0},n.prototype.setUniforms=function(t,e){var i,n,o,s,r,a=this.gl;if(!this.program)return this;for(s=t.length,r=0;r<s;r++)if(o=t[r],n=e[r],null!==(i=this.uniformLocations[o])&&(void 0===i&&(i=a.getUniformLocation(this.program,o),this.uniformLocations[o]=i),!this.uniformIsCached(o,n)))switch(this.uniformTypes[o]||(this.uniformTypes[o]=this.getUniformTypeFromValue(n)),this.uniformTypes[o]){case"uniform4fv":a.uniform4fv(i,n);break;case"uniform3fv":a.uniform3fv(i,n);break;case"uniform2fv":a.uniform2fv(i,n);break;case"uniform1fv":a.uniform1fv(i,n);break;case"uniform1f":a.uniform1f(i,n);break;case"uniformMatrix3fv":a.uniformMatrix3fv(i,!1,n);break;case"uniformMatrix4fv":a.uniformMatrix4fv(i,!1,n)}return this},n.prototype.getUniformTypeFromValue=function(t){if(Array.isArray(t)||t instanceof Float32Array)switch(t.length){case 1:return"uniform1fv";case 2:return"uniform2fv";case 3:return"uniform3fv";case 4:return"uniform4fv";case 9:return"uniformMatrix3fv";case 16:return"uniformMatrix4fv"}else if(!isNaN(parseFloat(t))&&isFinite(t))return"uniform1f";throw'cant load uniform "'+name+'" with value:'+JSON.stringify(t)},n.prototype.compileShader=function(t,e){var i=1;return this.options.debug&&(this.gl.compileShader=h.call(this)),this.gl.shaderSource(t,e),this.gl.compileShader(t),this.gl.getShaderParameter(t,this.gl.COMPILE_STATUS)||(console.error("compile error: "+this.gl.getShaderInfoLog(t)),console.error("1: "+e.replace(/\n/g,function(){return"\n"+(i+=1)+": "}))),t},e.exports=n},{"../utilities/clone":47,"../utilities/keyValueToArrays":48,"../webgl-shaders":60,"./Debug":52}],54:[function(t,e,i){"use strict";function n(t,e){e=e||{},this.id=t.createTexture(),this.width=e.width||0,this.height=e.height||0,this.mipmap=e.mipmap,this.format=e.format||"RGBA",this.type=e.type||"UNSIGNED_BYTE",this.gl=t,this.bind(),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipYWebgl||!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlphaWebgl||!1),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[e.magFilter]||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[e.minFilter]||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t[e.wrapS]||t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t[e.wrapT]||t.CLAMP_TO_EDGE)}n.prototype.bind=function(){return this.gl.bindTexture(this.gl.TEXTURE_2D,this.id),this},n.prototype.unbind=function(){return this.gl.bindTexture(this.gl.TEXTURE_2D,null),this},n.prototype.setImage=function(t){return this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl[this.format],this.gl[this.format],this.gl[this.type],t),this.mipmap&&this.gl.generateMipmap(this.gl.TEXTURE_2D),this},n.prototype.setArray=function(t){return this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl[this.format],this.width,this.height,0,this.gl[this.format],this.gl[this.type],t),this},n.prototype.readBack=function(t,e,i,n){var o,s=this.gl;t=t||0,e=e||0,i=i||this.width,n=n||this.height;var r=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,r),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.id,0),s.checkFramebufferStatus(s.FRAMEBUFFER)===s.FRAMEBUFFER_COMPLETE&&(o=new Uint8Array(i*n*4),s.readPixels(t,e,i,n,s.RGBA,s.UNSIGNED_BYTE,o)),o},e.exports=n},{}],55:[function(t,e,i){"use strict";function n(t){this.registry=[],this._needsResample=[],this._activeTexture=0,this._boundTexture=null,this._checkerboard=r(),this.gl=t}function o(t,e){var i=("string"==typeof t?new Image:t)||{};return i.crossOrigin="anonymous",i.src||(i.src=t),i.complete?e(i):i.onload=function(){e(i)},i}var s=t("./Texture"),r=t("./createCheckerboard");n.prototype.update=function(t){for(var e=this.registry.length,i=1;i<e;i++){var n=this.registry[i];n&&n.isLoaded&&n.resampleRate&&(!n.lastResample||t-n.lastResample>n.resampleRate)&&(this._needsResample[n.id]||(this._needsResample[n.id]=!0,n.lastResample=t))}},n.prototype.register=function(t,e){var i,n=this,r=t.data,a=t.id,h=t.options||{},u=this.registry[a];return u||(u=new s(this.gl,h),u.setImage(this._checkerboard),i=this.registry[a]={resampleRate:h.resampleRate||null,lastResample:null,isLoaded:!1,texture:u,source:r,id:a,slot:e},Array.isArray(r)||r instanceof Uint8Array||r instanceof Float32Array?(this.bindTexture(a),u.setArray(r),i.isLoaded=!0):r instanceof HTMLVideoElement?r.addEventListener("loadeddata",function(){n.bindTexture(a),u.setImage(r),i.isLoaded=!0,i.source=r}):"string"==typeof r&&o(r,function(t){n.bindTexture(a),u.setImage(t),i.isLoaded=!0,i.source=t})),a},n.prototype.bindTexture=function(t){var e=this.registry[t];this._activeTexture!==e.slot&&(this.gl.activeTexture(this.gl.TEXTURE0+e.slot),this._activeTexture=e.slot),this._boundTexture!==t&&(this._boundTexture=t,e.texture.bind()),this._needsResample[e.id]&&(e.texture.setImage(e.source),this._needsResample[e.id]=!1)},e.exports=n},{"./Texture":54,"./createCheckerboard":58}],56:[function(t,e,i){"use strict";function n(t,e){t.classList.add("famous-webgl-renderer"),this.canvas=t,this.compositor=e;var i=this.gl=this.getWebGLContext(this.canvas);i.clearColor(0,0,0,0),i.polygonOffset(.1,.1),i.enable(i.POLYGON_OFFSET_FILL),i.enable(i.DEPTH_TEST),i.enable(i.BLEND),i.depthFunc(i.LEQUAL),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),i.enable(i.CULL_FACE),i.cullFace(i.BACK),this.meshRegistry={},this.meshRegistryKeys=[],this.cutoutRegistry={},this.cutoutRegistryKeys=[],this.numLights=0,this.ambientLightColor=[0,0,0],this.lightRegistry={},this.lightRegistryKeys=[],this.lightPositions=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.lightColors=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.textureManager=new h(i),this.texCache={},this.bufferRegistry=new s(i),this.program=new o(i,{debug:!0}),this.state={boundArrayBuffer:null,boundElementBuffer:null,lastDrawn:null,enabledAttributes:{},enabledAttributesKeys:[]},this.resolutionName=["u_resolution"],this.resolutionValues=[[0,0,0]],this.cachedSize=[],this.projectionTransform=[1,0,0,0,0,1,0,0,0,0,-1e-6,0,-1,1,0,1];var n=this.cutoutGeometry={spec:{id:-1,bufferValues:[[-1,-1,0,1,-1,0,-1,1,0,1,1,0]],bufferNames:["a_pos"],type:"TRIANGLE_STRIP"}};this.bufferRegistry.allocate(this.cutoutGeometry.spec.id,n.spec.bufferNames[0],n.spec.bufferValues[0],3)}var o=t("./Program"),s=t("./BufferRegistry"),r=t("./radixSort"),a=t("../utilities/keyValueToArrays"),h=t("./TextureManager"),u=t("./compileMaterial"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p=a({u_numLights:0,u_ambientLight:new Array(3),u_lightPosition:new Array(3),u_lightColor:new Array(3),u_perspective:new Array(16),u_time:0,u_view:new Array(16)});n.prototype.getWebGLContext=function(t){for(var e,i=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=0,o=i.length;n<o;n++){try{e=t.getContext(i[n])}catch(t){console.error("Error creating WebGL context: "+t.toString())}if(e)return e}if(!e)return console.error("Could not retrieve WebGL context. Please refer to https://www.khronos.org/webgl/ for requirements"),!1},n.prototype.createLight=function(t){return this.numLights++,this.lightRegistryKeys.push(t),this.lightRegistry[t]={color:[0,0,0],position:[0,0,0]},this.lightRegistry[t]},n.prototype.createMesh=function(t){this.meshRegistryKeys.push(t);var e=a({u_opacity:1,u_transform:c,u_size:[0,0,0],u_baseColor:[.5,.5,.5,1],u_positionOffset:[0,0,0],u_normals:[0,0,0],u_flatShading:0,u_glossiness:[0,0,0,0]});return this.meshRegistry[t]={depth:null,uniformKeys:e.keys,uniformValues:e.values,buffers:{},geometry:null,drawType:null,textures:[],visible:!0},this.meshRegistry[t]},n.prototype.setCutoutState=function(t,e){this.getOrSetCutout(t).visible=e},n.prototype.getOrSetCutout=function(t){if(this.cutoutRegistry[t])return this.cutoutRegistry[t];var e=a({u_opacity:0,u_transform:c.slice(),u_size:[0,0,0],u_origin:[0,0,0],u_baseColor:[0,0,0,1]});return this.cutoutRegistryKeys.push(t),this.cutoutRegistry[t]={uniformKeys:e.keys,uniformValues:e.values,geometry:this.cutoutGeometry.spec.id,drawType:this.cutoutGeometry.spec.type,visible:!0},this.cutoutRegistry[t]},n.prototype.setMeshVisibility=function(t,e){(this.meshRegistry[t]||this.createMesh(t)).visible=e},n.prototype.removeMesh=function(t){var e=this.meshRegistryKeys.indexOf(t);this.meshRegistryKeys.splice(e,1),this.meshRegistry[t]=null},n.prototype.setCutoutUniform=function(t,e,i){var n=this.getOrSetCutout(t),o=n.uniformKeys.indexOf(e);if(i.length)for(var s=0,r=i.length;s<r;s++)n.uniformValues[o][s]=i[s];else n.uniformValues[o]=i},n.prototype.setMeshOptions=function(t,e){return(this.meshRegistry[t]||this.createMesh(t)).options=e,this},n.prototype.setAmbientLightColor=function(t,e,i,n){return this.ambientLightColor[0]=e,this.ambientLightColor[1]=i,this.ambientLightColor[2]=n,this},n.prototype.setLightPosition=function(t,e,i,n){var o=this.lightRegistry[t]||this.createLight(t);return o.position[0]=e,o.position[1]=i,o.position[2]=n,this},n.prototype.setLightColor=function(t,e,i,n){var o=this.lightRegistry[t]||this.createLight(t);return o.color[0]=e,o.color[1]=i,o.color[2]=n,this},n.prototype.handleMaterialInput=function(t,e,i){var n=this.meshRegistry[t]||this.createMesh(t);i=u(i,n.textures.length),n.uniformValues[n.uniformKeys.indexOf(e)][0]=-i._id;for(var o=i.textures.length;o--;)n.textures.push(this.textureManager.register(i.textures[o],n.textures.length+o));return this.program.registerMaterial(e,i),this.updateSize()},n.prototype.setGeometry=function(t,e,i,n){var o=this.meshRegistry[t]||this.createMesh(t);return o.geometry=e,o.drawType=i,o.dynamic=n,this},n.prototype.setMeshUniform=function(t,e,i){var n=this.meshRegistry[t]||this.createMesh(t),o=n.uniformKeys.indexOf(e);-1===o?(n.uniformKeys.push(e),n.uniformValues.push(i)):n.uniformValues[o]=i},n.prototype.bufferData=function(t,e,i,n,o,s){return this.bufferRegistry.allocate(e,i,n,o,s),this},n.prototype.draw=function(t){var e=this.compositor.getTime();this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.textureManager.update(e),this.meshRegistryKeys=r(this.meshRegistryKeys,this.meshRegistry),this.setGlobalUniforms(t),this.drawCutouts(),this.drawMeshes()},n.prototype.drawMeshes=function(){for(var t,e,i=this.gl,n=0;n<this.meshRegistryKeys.length;n++)if(e=this.meshRegistry[this.meshRegistryKeys[n]],t=this.bufferRegistry.registry[e.geometry],e.visible&&(e.uniformValues[0]<1?(i.depthMask(!1),i.enable(i.BLEND)):(i.depthMask(!0),i.disable(i.BLEND)),t)){for(var o=e.textures.length;o--;)this.textureManager.bindTexture(e.textures[o]);e.options&&this.handleOptions(e.options,e),this.program.setUniforms(e.uniformKeys,e.uniformValues),this.drawBuffers(t,e.drawType,e.geometry),e.options&&this.resetOptions(e.options)}},n.prototype.drawCutouts=function(){var t,e,i=this.cutoutRegistryKeys.length;if(i){this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.depthMask(!0);for(var n=0;n<i;n++)t=this.cutoutRegistry[this.cutoutRegistryKeys[n]],e=this.bufferRegistry.registry[t.geometry],t.visible&&(this.program.setUniforms(t.uniformKeys,t.uniformValues),this.drawBuffers(e,t.drawType,t.geometry));this.gl.enable(this.gl.CULL_FACE)}},n.prototype.setGlobalUniforms=function(t){for(var e,i,n=0,o=this.lightRegistryKeys.length;n<o;n++)e=this.lightRegistry[this.lightRegistryKeys[n]],i=4*n,this.lightPositions[0+i]=e.position[0],this.lightPositions[1+i]=e.position[1],this.lightPositions[2+i]=e.position[2],this.lightColors[0+i]=e.color[0],this.lightColors[1+i]=e.color[1],this.lightColors[2+i]=e.color[2];p.values[0]=this.numLights,p.values[1]=this.ambientLightColor,p.values[2]=this.lightPositions,p.values[3]=this.lightColors,this.projectionTransform[0]=1/(.5*this.cachedSize[0]),this.projectionTransform[5]=-1/(.5*this.cachedSize[1]),this.projectionTransform[11]=t.perspectiveTransform[11],p.values[4]=this.projectionTransform,p.values[5]=.001*this.compositor.getTime(),p.values[6]=t.viewTransform,this.program.setUniforms(p.keys,p.values)},n.prototype.drawBuffers=function(t,e,i){var n,o,s,r,a,h,u,c,p=this.gl,l=0;for(h=t.keys.length,c=0;c<h;c++)n=t.keys[c],"indices"!==n?-1!==(o=this.program.attributeLocations[n])&&(void 0===o&&(o=p.getAttribLocation(this.program.program,n),this.program.attributeLocations[n]=o,-1===o)||(this.state.enabledAttributes[n]||(p.enableVertexAttribArray(o),this.state.enabledAttributes[n]=!0,this.state.enabledAttributesKeys.push(n)),a=t.values[c],s=t.spacing[c],r=t.offset[c],l=t.length[c],this.state.boundArrayBuffer!==a&&(p.bindBuffer(a.target,a.buffer),this.state.boundArrayBuffer=a),this.state.lastDrawn!==i&&p.vertexAttribPointer(o,s,p.FLOAT,p.FALSE,0,4*r))):u=c;var d=this.state.enabledAttributesKeys.length;for(c=0;c<d;c++){var f=this.state.enabledAttributesKeys[c];this.state.enabledAttributes[f]&&-1===t.keys.indexOf(f)&&(p.disableVertexAttribArray(this.program.attributeLocations[f]),this.state.enabledAttributes[f]=!1)}l&&(void 0!==u?(a=t.values[u],r=t.offset[u],s=t.spacing[u],l=t.length[u],this.state.boundElementBuffer!==a&&(p.bindBuffer(a.target,a.buffer),this.state.boundElementBuffer=a),p.drawElements(p[e],l,p.UNSIGNED_SHORT,2*r)):p.drawArrays(p[e],0,l)),this.state.lastDrawn=i},n.prototype.updateSize=function(t){if(t){var e=window.devicePixelRatio||1,i=~~(t[0]*e),n=~~(t[1]*e);this.canvas.width=i,this.canvas.height=n,this.gl.viewport(0,0,i,n),this.cachedSize[0]=t[0],this.cachedSize[1]=t[1],this.cachedSize[2]=t[0]>t[1]?t[0]:t[1],this.resolutionValues[0]=this.cachedSize}return this.program.setUniforms(this.resolutionName,this.resolutionValues),this},n.prototype.handleOptions=function(t,e){var i=this.gl;t&&(t.blending&&i.enable(i.BLEND),"double"===t.side&&(this.gl.cullFace(this.gl.FRONT),this.drawBuffers(this.bufferRegistry.registry[e.geometry],e.drawType,e.geometry),this.gl.cullFace(this.gl.BACK)),"back"===t.side&&i.cullFace(i.FRONT))},n.prototype.resetOptions=function(t){var e=this.gl;t&&(t.blending&&e.disable(e.BLEND),"back"===t.side&&e.cullFace(e.BACK))},e.exports=n},{"../utilities/keyValueToArrays":48,"./BufferRegistry":51,"./Program":53,"./TextureManager":55,"./compileMaterial":57,"./radixSort":59}],57:[function(t,e,i){"use strict";function n(t,e){var i="",n={},u={},p={},l=[],d=[];return o(t,function(t,o){if(t.chunk){var f=c[s(t)],m=a(t),g=r(t.chunk.glsl,t.inputs,d.length+e);i+=f+m+" = "+g+"\n ",t.uniforms&&h(n,t.uniforms),t.varyings&&h(u,t.varyings),t.attributes&&h(p,t.attributes),t.chunk.defines&&l.push(t.chunk.defines),t.texture&&d.push(t.texture)}}),{_id:t._id,glsl:i+"return "+a(t)+";",defines:l.join("\n"),uniforms:n,varyings:u,attributes:p,textures:d}}function o(t,e){for(var i=t.inputs,n=i&&i.length,s=-1;++s<n;)o(i[s],e);return e(t),t}function s(t){if("number"==typeof t)return 1;if(Array.isArray(t))return t.length;var e=t.chunk.output;return"number"==typeof e?e:e[t.inputs.map(function(t){return s(t)}).join(",")]}function r(t,e,i){return t.replace(/%\d/g,function(t){return a(e[t[1]-1])}).replace(/\$TEXTURE/,"u_textures["+i+"]")}function a(t){return Array.isArray(t)?u(t):"object"==typeof t?"fa_"+t._id:t.toFixed(6)}function h(t,e){for(var i in e)t[i]=e[i]}function u(t){return"vec"+t.length+"("+t.join(",")+")"}var c={1:"float ",2:"vec2 ",3:"vec3 ",4:"vec4 "};e.exports=n},{}],58:[function(t,e,i){"use strict";function n(){var t=document.createElement("canvas").getContext("2d");t.canvas.width=t.canvas.height=128;for(var e=0;e<t.canvas.height;e+=16)for(var i=0;i<t.canvas.width;i+=16)t.fillStyle=16&(i^e)?"#FFF":"#DDD",t.fillRect(i,e,16,16);return t.canvas}e.exports=n},{}],59:[function(t,e,i){"use strict";function n(t,e,i){var n=t[i],o=e[n];return(o.depth?o.depth:e[n].uniformValues[1][14])+_}function o(t,e,i,n){var o=t[i];return e[o].depth=a(n)-_,o}function s(t,e,i){e[t[i]].depth=null}function r(t){return v[0]=t,b[0]}function a(t){return b[0]=t,v[0]}function h(t,e){var i,a,h,d,_,y,v,b,T,E,w,S=0,C=[];for(m=32/u+.999999999999999|0,i=0,d=c*m;i<d;i++)l[i]=0;for(i=0,d=t.length;i<d;i++){for(_=r(n(t,e,i)),_^=_>>31|2147483648,a=0,h=0;a<g;a+=c,h+=u)l[a+(_>>>h&p)]++;l[a+(_>>>h&f)]++}for(a=0;a<=g;a+=c)for(b=a,T=0;b<a+c;b++)E=l[b]+T,l[b]=T-1,T=E;if(--m){for(i=0,d=t.length;i<d;i++)_=r(n(t,e,i)),C[++l[_&p]]=o(t,e,i,_^=_>>31|2147483648);for(v=C,C=t,t=v;++S<m;){for(i=0,d=t.length,y=S*c,w=S*u;i<d;i++)_=r(n(t,e,i)),C[++l[y+(_>>>w&p)]]=t[i];v=C,C=t,t=v}}for(i=0,d=t.length,y=S*c,w=S*u;i<d;i++)_=r(n(t,e,i)),C[++l[y+(_>>>w&f)]]=o(t,e,i,_^(~_>>31|2147483648)),s(t,e,i);return C}var u=11,c=1<<u,p=c-1,l=new Array(c*Math.ceil(64/u)),d=1<<31%u,f=(d<<1)-1,m=32/u+.999999999999999|0,g=c*(m-1),_=Math.pow(20,6),y=new ArrayBuffer(4),v=new Float32Array(y,0,1),b=new Int32Array(y,0,1);e.exports=h},{}],60:[function(t,e,i){"use strict";var n={
vertex:'#define GLSLIFY 1\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2015 Famous Industries Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2015 Famous Industries Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * Calculates transpose inverse matrix from transform\n * \n * @method random\n * @private\n *\n *\n */\n\n\nmat3 getNormalMatrix_1_0(in mat4 t) {\n   mat3 matNorm;\n   mat4 a = t;\n\n   float a00 = a[0][0], a01 = a[0][1], a02 = a[0][2], a03 = a[0][3],\n   a10 = a[1][0], a11 = a[1][1], a12 = a[1][2], a13 = a[1][3],\n   a20 = a[2][0], a21 = a[2][1], a22 = a[2][2], a23 = a[2][3],\n   a30 = a[3][0], a31 = a[3][1], a32 = a[3][2], a33 = a[3][3],\n   b00 = a00 * a11 - a01 * a10,\n   b01 = a00 * a12 - a02 * a10,\n   b02 = a00 * a13 - a03 * a10,\n   b03 = a01 * a12 - a02 * a11,\n   b04 = a01 * a13 - a03 * a11,\n   b05 = a02 * a13 - a03 * a12,\n   b06 = a20 * a31 - a21 * a30,\n   b07 = a20 * a32 - a22 * a30,\n   b08 = a20 * a33 - a23 * a30,\n   b09 = a21 * a32 - a22 * a31,\n   b10 = a21 * a33 - a23 * a31,\n   b11 = a22 * a33 - a23 * a32,\n\n   det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n   det = 1.0 / det;\n\n   matNorm[0][0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n   matNorm[0][1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n   matNorm[0][2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n\n   matNorm[1][0] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n   matNorm[1][1] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n   matNorm[1][2] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n\n   matNorm[2][0] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n   matNorm[2][1] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n   matNorm[2][2] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n\n   return matNorm;\n}\n\n\n\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2015 Famous Industries Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * Calculates a matrix that creates the identity when multiplied by m\n * \n * @method inverse\n * @private\n *\n *\n */\n\n\nfloat inverse_3_1(float m) {\n    return 1.0 / m;\n}\n\nmat2 inverse_3_1(mat2 m) {\n    return mat2(m[1][1],-m[0][1],\n               -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);\n}\n\nmat3 inverse_3_1(mat3 m) {\n    float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n    float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n    float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n    float b01 =  a22 * a11 - a12 * a21;\n    float b11 = -a22 * a10 + a12 * a20;\n    float b21 =  a21 * a10 - a11 * a20;\n\n    float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n    return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n                b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n                b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nmat4 inverse_3_1(mat4 m) {\n    float\n        a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n        a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n        a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n        a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    return mat4(\n        a11 * b11 - a12 * b10 + a13 * b09,\n        a02 * b10 - a01 * b11 - a03 * b09,\n        a31 * b05 - a32 * b04 + a33 * b03,\n        a22 * b04 - a21 * b05 - a23 * b03,\n        a12 * b08 - a10 * b11 - a13 * b07,\n        a00 * b11 - a02 * b08 + a03 * b07,\n        a32 * b02 - a30 * b05 - a33 * b01,\n        a20 * b05 - a22 * b02 + a23 * b01,\n        a10 * b10 - a11 * b08 + a13 * b06,\n        a01 * b08 - a00 * b10 - a03 * b06,\n        a30 * b04 - a31 * b02 + a33 * b00,\n        a21 * b02 - a20 * b04 - a23 * b00,\n        a11 * b07 - a10 * b09 - a12 * b06,\n        a00 * b09 - a01 * b07 + a02 * b06,\n        a31 * b01 - a30 * b03 - a32 * b00,\n        a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\n\n\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2015 Famous Industries Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * Reflects a matrix over its main diagonal.\n * \n * @method transpose\n * @private\n *\n *\n */\n\n\nfloat transpose_2_2(float m) {\n    return m;\n}\n\nmat2 transpose_2_2(mat2 m) {\n    return mat2(m[0][0], m[1][0],\n                m[0][1], m[1][1]);\n}\n\nmat3 transpose_2_2(mat3 m) {\n    return mat3(m[0][0], m[1][0], m[2][0],\n                m[0][1], m[1][1], m[2][1],\n                m[0][2], m[1][2], m[2][2]);\n}\n\nmat4 transpose_2_2(mat4 m) {\n    return mat4(m[0][0], m[1][0], m[2][0], m[3][0],\n                m[0][1], m[1][1], m[2][1], m[3][1],\n                m[0][2], m[1][2], m[2][2], m[3][2],\n                m[0][3], m[1][3], m[2][3], m[3][3]);\n}\n\n\n\n\n/**\n * Converts vertex from modelspace to screenspace using transform\n * information from context.\n *\n * @method applyTransform\n * @private\n *\n *\n */\n\nvec4 applyTransform(vec4 pos) {\n    //TODO: move this multiplication to application code. \n\n    /**\n     * Currently multiplied in the vertex shader to avoid consuming the complexity of holding an additional\n     * transform as state on the mesh object in WebGLRenderer. Multiplies the object\'s transformation from object space\n     * to world space with its transformation from world space to eye space.\n     */\n    mat4 MVMatrix = u_view * u_transform;\n\n    //TODO: move the origin, sizeScale and y axis inversion to application code in order to amortize redundant per-vertex calculations.\n\n    /**\n     * The transform uniform should be changed to the result of the transformation chain:\n     *\n     * view * modelTransform * invertYAxis * sizeScale * origin\n     *\n     * which could be simplified to:\n     *\n     * view * modelTransform * convertToDOMSpace\n     *\n     * where convertToDOMSpace represents the transform matrix:\n     *\n     *                           size.x 0       0       size.x \n     *                           0      -size.y 0       size.y\n     *                           0      0       1       0\n     *                           0      0       0       1\n     *\n     */\n\n    /**\n     * Assuming a unit volume, moves the object space origin [0, 0, 0] to the "top left" [1, -1, 0], the DOM space origin.\n     * Later in the transformation chain, the projection transform negates the rigidbody translation.\n     * Equivalent to (but much faster than) multiplying a translation matrix "origin"\n     *\n     *                           1 0 0 1 \n     *                           0 1 0 -1\n     *                           0 0 1 0\n     *                           0 0 0 1\n     *\n     * in the transform chain: projection * view * modelTransform * invertYAxis * sizeScale * origin * positionVector.\n     */\n    pos.x += 1.0;\n    pos.y -= 1.0;\n\n    /**\n     * Assuming a unit volume, scales an object to the amount of pixels in the size uniform vector\'s specified dimensions.\n     * Later in the transformation chain, the projection transform transforms the point into clip space by scaling\n     * by the inverse of the canvas\' resolution.\n     * Equivalent to (but much faster than) multiplying a scale matrix "sizeScale"\n     *\n     *                           size.x 0      0      0 \n     *                           0      size.y 0      0\n     *                           0      0      size.z 0\n     *                           0      0      0      1\n     *\n     * in the transform chain: projection * view * modelTransform * invertYAxis * sizeScale * origin * positionVector.\n     */\n    pos.xyz *= u_size * 0.5;\n\n    /**\n     * Inverts the object space\'s y axis in order to match DOM space conventions. \n     * Later in the transformation chain, the projection transform reinverts the y axis to convert to clip space.\n     * Equivalent to (but much faster than) multiplying a scale matrix "invertYAxis"\n     *\n     *                           1 0 0 0 \n     *                           0 -1 0 0\n     *                           0 0 1 0\n     *                           0 0 0 1\n     *\n     * in the transform chain: projection * view * modelTransform * invertYAxis * sizeScale * origin * positionVector.\n     */\n    pos.y *= -1.0;\n\n    /**\n     * Exporting the vertex\'s position as a varying, in DOM space, to be used for lighting calculations. This has to be in DOM space\n     * since light position and direction is derived from the scene graph, calculated in DOM space.\n     */\n\n    v_position = (MVMatrix * pos).xyz;\n\n    /**\n    * Exporting the eye vector (a vector from the center of the screen) as a varying, to be used for lighting calculations.\n    * In clip space deriving the eye vector is a matter of simply taking the inverse of the position, as the position is a vector\n    * from the center of the screen. However, since our points are represented in DOM space,\n    * the position is a vector from the top left corner of the screen, so some additional math is needed (specifically, subtracting\n    * the position from the center of the screen, i.e. half the resolution of the canvas).\n    */\n\n    v_eyeVector = (u_resolution * 0.5) - v_position;\n\n    /**\n     * Transforming the position (currently represented in dom space) into view space (with our dom space view transform)\n     * and then projecting the point into raster both by applying a perspective transformation and converting to clip space\n     * (the perspective matrix is a combination of both transformations, therefore it\'s probably more apt to refer to it as a\n     * projection transform).\n     */\n\n    pos = u_perspective * MVMatrix * pos;\n\n    return pos;\n}\n\n/**\n * Placeholder for positionOffset chunks to be templated in.\n * Used for mesh deformation.\n *\n * @method calculateOffset\n * @private\n *\n *\n */\n#vert_definitions\nvec3 calculateOffset(vec3 ID) {\n    #vert_applications\n    return vec3(0.0);\n}\n\n/**\n * Writes the position of the vertex onto the screen.\n * Passes texture coordinate and normal attributes as varyings\n * and passes the position attribute through position pipeline.\n *\n * @method main\n * @private\n *\n *\n */\nvoid main() {\n    v_textureCoordinate = a_texCoord;\n    vec3 invertedNormals = a_normals + (u_normals.x < 0.0 ? calculateOffset(u_normals) * 2.0 - 1.0 : vec3(0.0));\n    invertedNormals.y *= -1.0;\n    v_normal = transpose_2_2(mat3(inverse_3_1(u_transform))) * invertedNormals;\n    vec3 offsetPos = a_pos + calculateOffset(u_positionOffset);\n    gl_Position = applyTransform(vec4(offsetPos, 1.0));\n}\n',fragment:'#define GLSLIFY 1\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2015 Famous Industries Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2015 Famous Industries Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * Placeholder for fragmentShader  chunks to be templated in.\n * Used for normal mapping, gloss mapping and colors.\n * \n * @method applyMaterial\n * @private\n *\n *\n */\n\n#float_definitions\nfloat applyMaterial_1_0(float ID) {\n    #float_applications\n    return 1.;\n}\n\n#vec3_definitions\nvec3 applyMaterial_1_0(vec3 ID) {\n    #vec3_applications\n    return vec3(0);\n}\n\n#vec4_definitions\nvec4 applyMaterial_1_0(vec4 ID) {\n    #vec4_applications\n\n    return vec4(0);\n}\n\n\n\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2015 Famous Industries Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * Calculates the intensity of light on a surface.\n *\n * @method applyLight\n * @private\n *\n */\nvec4 applyLight_2_1(in vec4 baseColor, in vec3 normal, in vec4 glossiness, int numLights, vec3 ambientColor, vec3 eyeVector, mat4 lightPosition, mat4 lightColor, vec3 v_position) {\n    vec3 diffuse = vec3(0.0);\n    bool hasGlossiness = glossiness.a > 0.0;\n    bool hasSpecularColor = length(glossiness.rgb) > 0.0;\n\n    for(int i = 0; i < 4; i++) {\n        if (i >= numLights) break;\n        vec3 lightDirection = normalize(lightPosition[i].xyz - v_position);\n        float lambertian = max(dot(lightDirection, normal), 0.0);\n\n        if (lambertian > 0.0) {\n            diffuse += lightColor[i].rgb * baseColor.rgb * lambertian;\n            if (hasGlossiness) {\n                vec3 halfVector = normalize(lightDirection + eyeVector);\n                float specularWeight = pow(max(dot(halfVector, normal), 0.0), glossiness.a);\n                vec3 specularColor = hasSpecularColor ? glossiness.rgb : lightColor[i].rgb;\n                diffuse += specularColor * specularWeight * lambertian;\n            }\n        }\n\n    }\n\n    return vec4(ambientColor + diffuse, baseColor.a);\n}\n\n\n\n\n\n/**\n * Writes the color of the pixel onto the screen\n *\n * @method main\n * @private\n *\n *\n */\nvoid main() {\n    vec4 material = u_baseColor.r >= 0.0 ? u_baseColor : applyMaterial_1_0(u_baseColor);\n\n    /**\n     * Apply lights only if flat shading is false\n     * and at least one light is added to the scene\n     */\n    bool lightsEnabled = (u_flatShading == 0.0) && (u_numLights > 0.0 || length(u_ambientLight) > 0.0);\n\n    vec3 normal = normalize(v_normal);\n    vec4 glossiness = u_glossiness.x < 0.0 ? applyMaterial_1_0(u_glossiness) : u_glossiness;\n\n    vec4 color = lightsEnabled ?\n    applyLight_2_1(material, normalize(v_normal), glossiness,\n               int(u_numLights),\n               u_ambientLight * u_baseColor.rgb,\n               normalize(v_eyeVector),\n               u_lightPosition,\n               u_lightColor,   \n               v_position)\n    : material;\n\n    gl_FragColor = color;\n    gl_FragColor.a *= u_opacity;   \n}\n'};e.exports=n},{}],61:[function(t,e,i){"use strict";function n(t,e){t.setPosition(0,0,-10).setSizeMode(0,0,0).setMountPoint(.5,.5).setAlign(.5,.5).setProportionalSize(1.2,1.2).setOrigin(.5,.5),this.scale=new s(t),this.main=t.addChild(),new o(this.main,{tagName:"img",properties:{zIndex:"-5"},attributes:{src:"./images/stars.jpg"}}),this.blur=t.addChild().setPosition(0,0,1),this.blur.opacity=new r(this.blur).set(0),new o(this.blur,{tagName:"img",properties:{zIndex:"-2"},attributes:{src:"./images/stars_blur.jpg"}})}var o=t("famous/dom-renderables/DOMElement"),s=t("famous/components/Scale"),r=t("famous/components/Opacity");n.prototype.scaleBg=function(){this.scale.halt(),this.scale.set(1.05,1.05,1,{duration:5e3,curve:"easeInOutBounce"},function(){this.scale.set(1,1,1,{duration:5e3,curve:"easeIn"})}.bind(this))},n.prototype.showBlur=function(){this.blur.opacity.set(1)},n.prototype.hideBlur=function(){this.blur.opacity.set(0,{duration:1e3})},e.exports=n},{"famous/components/Opacity":4,"famous/components/Scale":6,"famous/dom-renderables/DOMElement":21}],62:[function(t,e,i){"use strict";function n(t,e){this.dateAndTimeNode=t,this.time=this.dateAndTimeNode.addChild(),this.date=this.time.addChild(),this.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],o.call(this),s.call(this),a.requestUpdateOnNextTick(this)}function o(){this.time.el=new r(this.time,{properties:{color:"white","font-size":"68px","font-family":"'Arimo',Droid Sans', sans-serif","text-align":"center"}}),this.date.el=new r(this.date,{properties:{"font-size":"16px","text-align":"center"}})}function s(){this.dateAndTimeNode.setSizeMode(1,1,1).setAbsoluteSize(250,100),this.time.setSizeMode(1,1,1).setAbsoluteSize(200,100).setAlign(.5,0).setMountPoint(.5,0),this.date.setSizeMode(1,1,1).setAbsoluteSize(200,20).setAlign(0,1).setMountPoint(0,1)}var r=t("famous/dom-renderables/DOMElement"),a=t("famous/core/FamousEngine");n.prototype.onUpdate=function(){var t=new Date,e=t.getHours(),i=t.getMinutes();i=(i<10?"0":"")+i,e=e>12?e-12:e,e=0===e?12:e;var n=this.dayNames[t.getDay()]+", "+this.monthNames[t.getMonth()]+" "+t.getDate(),o=e+":"+i;this.time.el._content!==o&&this.time.el.setContent(o),this.date.el._content!==n&&this.date.el.setContent(n),a.requestUpdateOnNextTick(this)},e.exports=n},{"famous/core/FamousEngine":12,"famous/dom-renderables/DOMElement":21}],63:[function(t,e,i){"use strict";function n(t,e){var i=e.size||[10,10];this.color=e.color||"white",t.setSizeMode(1,1,1).setAbsoluteSize(i[0],i[1]),this.el=new o(t,{properties:{borderRadius:"50%",color:this.color,border:"2px solid"}})}var o=t("famous/dom-renderables/DOMElement");n.prototype.on=function(){this.el.setProperty("background","rgba(200, 191, 217, .9)")},n.prototype.off=function(){this.el.setProperty("background","rgba(200, 191, 217, 0)")},e.exports=n},{"famous/dom-renderables/DOMElement":21}],64:[function(t,e,i){"use strict";function n(t,e){this.root=t,this.iconsNode=t.addChild(),this.iconsNode.scale=new c(this.iconsNode),this.iconsNode.position=new p(this.iconsNode),this.show=new u(this.iconsNode).setY(-1),this.options=e;var i=e.len||10,n=e.numSize||50,s=e.padding||20,r=e.columns||4,l=e.vert||30,d=e.borderRadius;this.colors=e.colors,this.iconsNode.addComponent({onReceive:function(t,e){"click"===t&&a.call(this,e.node.id,r,i)}.bind(this)}),this.iconInfo=[];for(var f=0;f<i;f++){var m=o(f,s,r,n,1,l,i),g=this.iconsNode.addChild().setSizeMode(1,1,1).setAbsoluteSize(n,n);g.id=f,this.iconInfo[f]=new p(g).set(m[0],m[1],m[2]);var _="./images/icons/"+e.classes[f].toLowerCase()+".png";this.iconInfo[f].el=new h(g,{content:'<img style="height:50px;width:50px" src="'+_+'" />',classes:["icon",e.classes[f]||"default"],properties:{borderRadius:d,cursor:"pointer"}}),g.addUIEvent("click");var y=g.addChild().setSizeMode(1,1,1).setAbsoluteSize(50,10,0).setMountPoint(.5,1).setAlign(.5,1).setPosition(0,15,0);new h(y,{content:e.iconText[f]||"Icon",properties:{fontSize:"10px",color:"white",textAlign:"center"}})}}function o(t,e,i,n,o,s,r){var a,h=e+t%i*(n+e),u=e+Math.floor(t/i)*(s+n);return t%i!=i-1&&t%i!=0||(a=300*o),t%i<i-1&&t%i>0&&(a=110*o,1!==Math.ceil(t/i)&&Math.ceil(t/i)!==Math.ceil(r.length/i)||(a+=110*o)),[h,u,a]}function s(t,e,i,n){return[e+(t+e)*i,e+Math.ceil(n/i)*(e+t)]}function r(t,e,i,n,o){return(o-t)*(n-i)/(e-t)+i}function a(t,e,i){var n=r(0,e-1,0,1,t%e),o=Math.ceil(i/e)-1,s=r(0,o,0,1,Math.floor(t/e));this.iconsNode.setOrigin(n,s),this.iconsNode.scale.set(5,5,1,{duration:300,curve:"inOutExpo"})}var h=t("famous/dom-renderables/DOMElement"),u=t("famous/components/Align"),c=t("famous/components/Scale"),p=t("famous/components/Position");n.prototype.storeSizes=function(t,e){this.screenSizes=[t,e]},n.prototype.animateForward=function(){var t=this.options,e=s(t.numSize,t.padding,t.columns,t.len);this.root.setAbsoluteSize(e[0],e[1]).setAlign(-1.5,.05).setMountPoint(.5,0);var i=this.iconInfo.length;this.show.setY(0);for(var n=0;n<i;n++)this.iconInfo[n].setZ(0,{duration:1500,curve:"inOutExpo"})},n.prototype.showIcons=function(){this.iconsNode.scale.set(1,1,1,{duration:500,curve:"inOutExpo"}),this.iconsNode.setPosition(0,0,0)},e.exports=n},{"famous/components/Align":1,"famous/components/Position":5,"famous/components/Scale":6,"famous/dom-renderables/DOMElement":21}],65:[function(t,e,i){"use strict";function n(t){this.node=t,this.modalEl=new c(this.node,{classes:["modal"],properties:{background:"black",color:"white",overflow:"scroll"}}),this.scale=new l(this.node),this.position=new p(this.node),this.opacity=new d(this.node),this.closeNode=this.node.addChild().setSizeMode(1,1,1).setPosition(0,0,6).setAbsoluteSize(25,25).setAlign(.95,.05).setMountPoint(.95,0),this.closer=new c(this.closeNode,{content:'<i class="fa fa-times-circle-o"></i>',classes:["closer"]}),this.closeNode.hideModal=!0,this.closeNode.addUIEvent("click"),this.closeNode.addComponent({onReceive:function(t){this.hide(150)}.bind(this)})}function o(t,e,i){var n=e||4,o=i||17,r=Math.ceil(o/n)-1;return[s(0,n-1,0,1,t%n),s(0,r,0,1,Math.floor(t/n))]}function s(t,e,i,n,o){return(o-t)*(n-i)/(e-t)+i}function r(){return navigator.webkitGetUserMedia?"webkitGetUserMedia":navigator.getUserMedia?"getUserMedia":navigator.mozGetUserMedia?"mozGetUserMedia":!!navigator.msGetUserMedia&&"msGetUserMedia"}function a(t){this.modalEl.setContent("<h1>Camera rejected!</h1>")}function h(){var t=r();t&&navigator[t]({video:!0},function(t){document.querySelector("video").src=window.URL.createObjectURL(t)},a.bind(this)),t||this.modalEl.setContent('<input id="image_input" type="file" accept="image/*;capture=camera" onchange="updateImage(this)"><br /><img id="myimage" src="" />')}function u(t){var e=f.links[t.toLowerCase()]||"https://github.com/morgantheplant";m.getClock().setTimeout(function(){confirm("You are being redirected to "+t+". Would you like to continue?")&&(window.location=e)},1e3)}var c=t("famous/dom-renderables/DOMElement"),p=t("famous/components/Position"),l=t("famous/components/Scale"),d=t("famous/components/Opacity"),f=t("./iconData"),m=t("famous/core/FamousEngine");n.prototype.hide=function(t){t||this.scale.set(0,0,0),t&&(this.scale.set(0,0,0,{duration:t}),this.position.set(0,0,5,{duration:150}))},n.prototype.initBlackScreen=function(){this.scale.set(1.5,1.5,1),this.position.set(0,0,5),m.getClock().setTimeout(function(){this.opacity.set(0,{duration:2e3,curve:"easeInOut"},function(){this.hide(150)}.bind(this))}.bind(this),1e3)},n.prototype.show=function(t){var e=f.classes[t],i=f.content[t];this.opacity.set(1);var n=o(t);if(this.node.setOrigin(n[0],n[1]),this.position.set(0,0,5,{duration:150},function(){this.scale.set(1,1,1,{duration:150}),this.position.set(0,0,5,{duration:150})}.bind(this)),"Camera"!==e){var s='<div id="modal_text_container">'+i+"</div>";this.modalEl.setContent(s)}"Camera"===e&&(this.modalEl.setContent('<video autoplay style="height:100%;width:100%"></video>'),h.call(this)),"github"!==e.toLowerCase()&&"linkedin"!==e.toLowerCase()||u(e)},e.exports=n},{"./iconData":69,"famous/components/Opacity":4,"famous/components/Position":5,"famous/components/Scale":6,"famous/core/FamousEngine":12,"famous/dom-renderables/DOMElement":21}],66:[function(t,e,i){"use strict";function n(t,e){var i=e.btnSize||75,n=e.bgColor||"rgb(215, 206, 232)",a=e.number,h=e.text;this.passwordDotsCounter=0,this.numberKeyNode=t,this.elementNode=this.numberKeyNode.addChild(),s.call(this,n),o.call(this,a,h),r.call(this,i)}function o(t,e){var i='<span class="number">'+t+'</span><br /><span class="text">'+e+"</span>";this.element=new a(this.elementNode,{content:i,properties:{color:"white",fontFamily:"'Arimo',Droid Sans', sans-serif",textAlign:"center",fontSize:"30px",lineHeight:"15px"}})}function s(t){this.bg=new a(this.numberKeyNode,{properties:{color:"red",borderRadius:"50%",border:"3px solid rgba(200, 191, 217, .7)",textAlign:"center",cursor:"pointer"}}),this.numberKeyNode.addUIEvent("click"),this.numberKeyNode.addUIEvent("touchstart"),this.numberKeyNode.addUIEvent("mousedown"),this.numberKeyNode.addUIEvent("touchend"),this.numberKeyNode.addUIEvent("mouseup"),this.numberKeyNode.addUIEvent("mouseleave"),this.numberKeyNode.addUIEvent("mouseover"),this.bgOpacity=new u(.9);var e=this.numberKeyNode.getParent().eventTypeStart,i=this.numberKeyNode.getParent().eventTypeEnd;this.buttonFade={onReceive:function(t){t===e&&(this.bg.setProperty("background-color","rgba(200, 191, 217, .9)"),this.bgOpacity.set(.9)),t===i&&(this.bgOpacity.set(0,{duration:350}),h.requestUpdate(this.buttonFade))}.bind(this),onUpdate:function(){var t=this.bgOpacity.get();t&&(this.bg.setProperty("background-color","rgba(200, 191, 217, "+t+")"),h.requestUpdateOnNextTick(this.buttonFade))}.bind(this)},this.numberKeyNode.addComponent(this.buttonFade)}function r(t){this.numberKeyNode.setSizeMode(1,1,1).setAbsoluteSize(75,75),this.elementNode.setSizeMode(1,1,1).setAbsoluteSize(35,45).setAlign(.5,.5).setMountPoint(.5,.5).setPosition(-2,2,0)}var a=t("famous/dom-renderables/DOMElement"),h=t("famous/core/FamousEngine"),u=t("famous/transitions/Transitionable");e.exports=n},{"famous/core/FamousEngine":12,"famous/dom-renderables/DOMElement":21,"famous/transitions/Transitionable":45}],67:[function(t,e,i){"use strict"
;function n(t){return-1!==t.indexOf("mobile")||-1!==t.indexOf("iphone")||-1!==t.indexOf("android")||-1!==t.indexOf("ipad")}function o(t){this.numberPadNode=t,this.numberPadNode.eventTypeStart=E,this.numberPadNode.eventTypeEnd=w;var e=[[1,""],[2,"ABC"],[3,"DEF"],[4,"GHI"],[5,"JKL"],[6,"MNO"],[7,"PQRS"],[8,"TUV"],[9,"WXYZ"],[0,""]];this.numberNodes={};var i=e.length,n=r(75,15,3,i);this.numberPadNode.setSizeMode(1,1,1).setAbsoluteSize(n[0],n[1]).setAlign(.5,.5).setMountPoint(.5,.5);for(var o=0;o<i;o++){var c=this.numberPadNode.addChild(),p=new y(c,{number:e[o][0],text:e[o][1],btnSize:75}),l=s.call(this,o,15,3,75),m=new f(c).set(l[0],l[1]);this.numberNodes[o]={node:c,numKey:p,position:m}}a.call(this),u.call(this),h.call(this),d.call(this)}function s(t,e,i,n,o){var s=e+t%i*(n+e),r=e+Math.floor(t/i)*(e+n);return 9!==t||this.icons||(s=e+1*(n+e)),[s,r,0]}function r(t,e,i,n){return[e+(t+e)*i,e+Math.ceil(n/i)*(e+t)]}function a(){this.numberPadNode.dots=this.numberPadNode.addChild().setAlign(.5,0).setPosition(0,-35,1).setMountPoint(.5,0).setSizeMode(1,1,1).setAbsoluteSize(108,10);var t=this.numberPadNode.dots;this.dotsNumber=4,this.dotsCounter=0;for(var e=0;e<this.dotsNumber;e++){var i=[12,12];t[e]=t.addChild(),t[e].setPosition(e*i[0]+20*e,0,0),t[e].instance=new _(t[e],{size:i,color:"rgba(200, 191, 217, .7)"})}}function h(){this.numberPadNode.addComponent({onReceive:function(t,e){e.node!==this.cancelOrDeleteNode&&e.node!==this.emergencyNode&&t===this.numberPadNode.eventTypeStart&&this.markTheDot(),e.node===this.emergencyNode&&alert("MayDay!")}.bind(this)})}function u(){this.numberPadTextNode=this.numberPadNode.addChild().setPosition(0,-70,0).setAlign(.5,0).setMountPoint(.5,0).setSizeMode(1,1,1).setAbsoluteSize(176,12),new m(this.numberPadTextNode,{content:"Enter any Four Numbers",properties:{color:"white"}}),this.emergencyNode=this.numberPadNode.addChild().setPosition(10,55,0).setAlign(0,1).setSizeMode(1,1,1).setAbsoluteSize(80,12),this.emergencyNode.addUIEvent("mousedown"),this.emergencyNode.addUIEvent("touchstart"),new m(this.emergencyNode,{content:"Emergency",properties:{color:"white",cursor:"pointer"}}),this.cancelOrDeleteNode=this.numberPadNode.addChild().setPosition(-10,55,0).setAlign(1,1).setMountPoint(1,0).setSizeMode(1,1,1).setAbsoluteSize(50,12),this.cancelOrDeleteNode.cancel=!0,this.cancelOrDeleteNode.el=new m(this.cancelOrDeleteNode,{content:"Cancel",properties:{color:"white",cursor:"pointer"}}),this.cancelOrDeleteNode.addUIEvent("mousedown"),this.cancelOrDeleteNode.addUIEvent("touchstart")}function c(){this.cancelOrDeleteNode.cancel=!1,this.cancelOrDeleteNode.remove=!0,this.cancelOrDeleteNode.setAbsoluteSize("60"),this.cancelOrDeleteNode.el.setContent("Remove")}function p(){this.cancelOrDeleteNode.cancel=!0,this.cancelOrDeleteNode.remove=!1,this.cancelOrDeleteNode.setAbsoluteSize("50"),this.cancelOrDeleteNode.el.setContent("Cancel")}function l(){this.cancelOrDeleteNode.setOpacity(0),this.cancelOrDeleteNode.setOpacity(0),this.numberPadTextNode.setOpacity(0),this.emergencyNode.setOpacity(0),this.numberPadNode.dots.setOpacity(0);for(var t=0;t<10;t++)this.numberNodes[t].node.setOpacity(0);this.numberPadNode.removeChild(this.cancelOrDeleteNode),this.numberPadNode.removeChild(this.numberPadTextNode),this.numberPadNode.removeChild(this.emergencyNode),this.numberPadNode.removeChild(this.numberPadNode.dots);for(var e=0;e<10;e++)this.numberPadNode.removeChild(this.numberNodes[e].node)}function d(){this.icons=new b(this.numberPadNode,v)}var f=t("famous/components/Position"),m=t("famous/dom-renderables/DOMElement"),g=t("famous/core/FamousEngine"),_=t("./Dot"),y=t("./NumberKey"),v=t("./iconData"),b=t("./Icons"),T=function(){var t=!1;return"ontouchstart"in document.documentElement&&(t=n(window.navigator.userAgent.toLowerCase()),window.history.replaceState(null,null)),t}(),E=T?"touchstart":"mousedown",w=T?"touchend":"mouseup";o.prototype.storeSizes=function(t,e){this.screenSizes=[t,e],this.icons.storeSizes(t,e)},o.prototype.showIcons=function(){this.icons.showIcons()},o.prototype.markTheDot=function(){var t=this.dotsCounter,e=this.numberPadNode.dots;e[t]&&(e[t].instance.on(),c.call(this)),3===t&&g.getClock().setTimeout(function(){this.icons.animateForward(),l.call(this),this.removeBlurryBackground()}.bind(this),300),this.dotsCounter++},o.prototype.removeTheDot=function(){this.dotsCounter>0&&this.dotsCounter--;var t=this.dotsCounter,e=this.numberPadNode.dots;e[t]&&e[t].instance.off(),0===t&&p.call(this)},o.prototype.removeBlurryBackground=function(){this.mainBG.opacity.set(0,{duration:1e3,curve:"easeOut"},function(){this.mainBG.getParent().removeChild(this.mainBG)}.bind(this))},e.exports=o},{"./Dot":63,"./Icons":64,"./NumberKey":66,"./iconData":69,"famous/components/Position":5,"famous/core/FamousEngine":12,"famous/dom-renderables/DOMElement":21}],68:[function(t,e,i){"use strict";function n(t){var e="> slide to unlock".split("");this.letters={},this.count=0,this.aryLength=e.length;for(var i=0;i<this.aryLength;i++){var n=t.addChild();this.letters[i]={node:n,opacity:new h(n),el:new o(n,{text:e[i]})},n.setSizeMode(1,1,1).setAbsoluteSize(8,15).setPosition(10*i,0,0),this.letters[i].opacity.set(.4)}s.call(this),u.setInterval(function(){s.call(this)}.bind(this),4e3)}function o(t,e){this.el=new r(t,{content:e.text,properties:{"text-align":"center",color:"white","font-size":"18px"}})}function s(){if(this.count<this.aryLength){var t=this.letters,e=this.count;this.letters[this.count].opacity.set(1,{duration:450},function(){u.setTimeout(function(){t[e].opacity.set(.4,{duration:450})},800)}),u.setTimeout(function(){this.count++,s.call(this)}.bind(this),200)}this.count===this.aryLength&&(this.count=0)}var r=t("famous/dom-renderables/DOMElement"),a=t("famous/core/FamousEngine"),h=t("famous/components/Opacity"),u=a.getClock();e.exports=n},{"famous/components/Opacity":4,"famous/core/FamousEngine":12,"famous/dom-renderables/DOMElement":21}],69:[function(t,e,i){e.exports={len:17,numSize:50,padding:20,columns:4,vert:30,initZ:2e3,borderRadius:"10px",colors:["grey","none","white","none"],content:["<h1>About</h1><p>This website was build using the Famous Engine. I built it while working at Famous as a Curriculum Software Engineer where I taught both new and experienced developers how to use the JavaScript library.</p><p>Click on the various icons to visit some of the projects and demos that I worked on while at Famous. Since many of the projects feature deprecated or unreleased versions of the Engine I have obfuscated or hidden the code. However If you would like to see the code for this project you can check it out here: <a href=https://github.com/Morgantheplant/phonesite alt=Morgans phonesite Github repo>https://github.com/Morgantheplant/phonesite.</a></p>","<h1>Github</h1><img style='max-width: 155px;' src='images/morgantheplant.jpg' alt='morgantheplant's profile image' /><h4>Check out my GitHub page: <a href='https://github.com/morgantheplant'>https://github.com/morgantheplant</a></h4><p>Username: morgantheplant </p>","<h1>LinkedIn</h1><img style='max-width: 155px;' src='images/morgantheplant.jpg' alt='morgantheplant's profile image' /><h4>Check out my LinkedIn page: <a href='https://www.linkedin.com/in/morganplant'>https://www.linkedin.com/in/morganplant</a></h4>","<h1>BLOG</h1><p>Coming soon..</p>","<h1>Copy</h1><p>In addition to front-end development, I also have experience as both a technical writer and SEO copywriter. At Famous, I was responsible for writing and maintaining the lessons, guides, and tutorials. This involved diving into the source and figuring out the APIs myself, so I could better teach and write about what was going on under the hood.</p><p>Since the Engine was under constant change and development, I wrote and re-wrote the guides for each iteration of the Engine. Drawing on previous experience as a SEO copywriter, I was also able to beef up blog posts and optimize my self-recorded Famous University YouTube videos to maximize reach.</p><p><ul><li>See the Famous guides at: <a href=http://famous.org/learn/>http://famous.org/learn/</a></li><li>See my TBYB writing assignment at: <a href=http://morgantheplant.com/mixedmode>morgantheplant.com/mixedmode</a></li></ul></p>","<h1>Contact</h1><p>Please contact me through LinkedIn: <a href='https://www.linkedin.com/in/morganplant'>https://www.linkedin.com/in/morganplant</a></p>",'<h1>Settings</h1><p>Stay tuned.. I may add ability to modify size and spacing of icons.</p><p>For now, check out the landing page for my TBYB proects here: <a href="TBYB">morgantheplant.com/TBYB</a></p>',"Camera","<h1>Vectr</h1><a href=\"vectr\"><img src='images/vectr.png'alt='vectr project screen shot'/></a><p>Use the arrow keys to move the player and the spacebar to shoot bullets. The character is animated using image sprites I found on the internet and modified for this game.</p><p>I worked on this project in my spare time to teach myself how to use the Famous Physics Engine. In the process, I found a bug with removing bodies and collisions. I tried digging into the source to find the cause, but I got lost down a rabbit hole and decided to document and submit as an issue. I may go back and refactor this code for the latest API changes so I can create an actual game. This is written in an old version of the Engine, so most of it will need to be rewritten.</p>","<h1>LED</h1><a href=\"led\"><img src='images/led.png'alt='led project screen shot'/></a><p>I built this project on an unreleased functional reactive version of the Famous Engine (code named Yggdrasil). It was very interesting in that you provided your data model up top and this data flowed down into all of the views. While I liked this version, it was very difficult to conceptualize using it for large projects especially when keeping modulatity in mind. This version was eventually phased out for the entity component system/scene graph approach that we are using today.</p><p>This project was a test to see how many DOM elements I could animate on the screen. Enter your text into the green input field and then click the red button to see it on the LED board. The blue button changes the color. I believe the debounce function I wrote is very rudimentary so it may freak out if you press the red button a lot.</p>","<h1>BinSearch: TBYB</h1><a href=\"binsearch\"><img src='images/binsearch.png'alt='binsearch project screen shot'/></a><p>As part of the \"TBYB\" (i.e. Try Before You Buy) hiring process for Famous you are asked to complete a project relating to your position. Since I was opting for the Famous University position, I was givien an assignment to create visualizations that could help teach complex subects in a creative way.</p><p> This is the second of three projects I created during my two week sprint. Using the now deprecated version of the Engine, I built this to teach the classic Binary Search algorithm. I wanted to make it feel like a game and tried to include some Candy Crush style animations. Note how I reused components from the other projects here. I built all of these with modularity and extensibilty in mind helping me complete all three projects within the two week deadline.</p>","<h1>Binary: TBYB</h1><a href=\"binary\"><img src='images/binary.png'alt='binary project screen shot'/></a><p>As part of the \"TBYB\" (i.e. Try Before You Buy) hiring process for Famous you are asked to complete a project relating to your position. Since I was opting for the Famous University position, I was givien an assignment to create visualizations that could help teach complex subects in a creative way.</p><p>This is the first of three projects I created during my two week sprint. Here I use glowing cards to represent the digits in a byte. You can press play to start the animation or add a number into the input field. This is built using an old deprecated version of the Engine</p>","<h1>BubSort: TBYB</h1><a href=\"bubsort\"><img src='images/bubsort.png'alt='bubsort project screen shot'/></a><p>As part of the \"TBYB\" (i.e. Try Before You Buy) hiring process for Famous you are asked to complete a project relating to your position. Since I was opting for the Famous University position, I was givien an assignment to create visualizations that could help teach complex subects in a creative way.</p><p>This is the third of three projects I created during my two week sprint. This is my favorite of the three projects. Each note is size based on its hertz and the colors change each time a note is compared against the next. This project uses the bubble sort algorithm to sort the notes in ascending order. The input field at the bottom lets you enter your own notes to be sorted or choose from some predefined tunes. I ran out of time before writing any code to clean up the strings from the input so there may be errors there. Again this was on a now deprecated version of the Engine and one of three projects built in 2 weeks (you may find some bugs).</p>",'<h1>Videos</h1><p>Teaching was a big part of my position as curriculum engineer at Famous. This included hosting live streams and recording YouTube videos to help teach developers the framework. Here are a couple of the select videos that are still posted</p><p>Boiler Plate Tutorial - Famous Mixed Mode: </p><p><iframe max-width=\'300px\' height=\'250px\' src="https://www.youtube.com/embed/1opVcuVEnns" frameborder="0" allowfullscreen></iframe></p><p>Famous Framework - Getting Started:</p><p><iframe max-width=\'300px\' height=\'250px\'  src="https://www.youtube.com/embed/hZsrHVzx4as" frameborder="0" allowfullscreen></iframe></p><p>Famous Framework: AppleTV tutorial 9 Video Series:</p><p><iframe max-width="300" height="250" src="https://www.youtube.com/embed/videoseries?list=PL0bvP7Hupz0QJNKPSx7JKbCgbJHdp66zr" frameborder="0" allowfullscreen></iframe></p>','<h1>Code Duel</h1><a href="http://codeduel.azurewebsites.net/"><img src="images/codeduel.png" alt="code duel project"></a><p>This is a coding game using WebSockets that lets two players duke it out in a head to head challenge. I built this as a group project at Hack Reactor. More specifically, I integrated an SQL database with Angular to store and display high scores, challengers, time coding & the prompt. I also added crucial gameplay features including the room capacity logic, room to room broadcasting, the editor & timer</p>',"<h1>AppleTV</h1><a href=\"appletv\"><img src='images/appletv.png'alt='appletv project screen shot'/></a><p> A project and lesson I created for the Famous framework. I modified it here to ping my instagram account and update the images. It took me about a week to learn the Framework, build this project and write the copy for the lesson.</p>",'<h1>LED clock</h1><a href="LEDclock"><img src="images/LEDclock.png" alt="LED clock project"></a><p>I built this one afternoon to practice using a requestAnimationFrame loop without Famous. This runs a simple update loop that changes the border style of several DIVs. This uses pure DOM, CSS and HTML. Check out the repo for it here: <a href="https://github.com/Morgantheplant/LEDclock">https://github.com/Morgantheplant/LEDclock</a></p>'],iconText:["About","GitHub","LinkedIn","BLOG","Copy","Contact","Settings","Camera","Vectr","LED","BinSearch","Binary","BubSort","Videos","Code Duel","AppleTV","LED clock"],classes:["About","GitHub","LinkedIn","BLOG","Copy","Contact","Settings","Camera","Vectr","LED","BinSearch","Binary","BubSort","Videos","PicCapsule","Art","Calculator"],links:{github:"https://github.com/morgantheplant",linkedin:"https://www.linkedin.com/in/morganplant"}}},{}],70:[function(t,e,i){"use strict";function n(){this.scene=f.createScene(),this.root=this.scene.addChild(),new y(this.root).setDepth(100),this.draggerNode=this.root.addChild(),this.draggerNode.el=new d(this.draggerNode),this.draggerNode.pos=new g(this.draggerNode),this.timeNode=this.draggerNode.addChild(),new v(this.timeNode),this.sliderNode=this.draggerNode.addChild(),new b(this.sliderNode),this.batteryNode=this.root.addChild(),new c(this.batteryNode),this.receptionNode=this.root.addChild(),new u(this.receptionNode),this.cameraNode=this.root.addChild(),this.cameraNode.pos=new g(this.cameraNode),new p(this.cameraNode),this.backgroundNode=this.root.addChild(),this.background=new w(this.backgroundNode),this.background.scaleBg(),this.modalNode=this.root.addChild(),this.modal=new E(this.modalNode),this.numbers=this.draggerNode.addChild(),this.numberPad=new T(this.numbers),this.numberPad.mainBG=this.background.blur,f.init(),o.call(this),s.call(this)}function o(){this.timeNode.setAlign(.5,.13).setMountPoint(.5,0),this.draggerNode.setSizeMode(0,0).setProportionalSize(.5,.95).setAlign(.5,.5).setMountPoint(.5,.5),this.sliderNode.setSizeMode(1,1).setAbsoluteSize(170,50).setMountPoint(.5,.97).setAlign(.5,1),this.receptionNode.setSizeMode(0,1).setAbsoluteSize(void 0,30).setPosition(10,7),this.batteryNode.setSizeMode(0,1).setAbsoluteSize(void 0,30).setPosition(-70,7).setAlign(1,0),this.cameraNode.setSizeMode(1,1).setAbsoluteSize(25,25).setAlign(1,1).setMountPoint(1,1),this.numbers.setAlign(-1.5,.5).setMountPoint(.5,.5).setPosition(0,0,1),this.modal.initBlackScreen(),this.root.addComponent({onReceive:function(t,e){"click"===t&&e.node.hideModal&&this.numberPad.showIcons()}.bind(this),onSizeChange:function(t,e){this.screenSize=[t,e],this.numberPad.storeSizes(t,e),this.padisShowing&&h.call(this)}.bind(this)})}function s(){new m(this.draggerNode,[{event:"drag",callback:r.bind(this)}]),this.draggerNode.addComponent({onReceive:function(t,e){if("click"===t&&void 0!==e.node.id&&this.modal.show(e.node.id),e.node.cancel){this.padisShowing=!1;var i=new _(this.screenSize[0]),n=f.getClock().setInterval(function(){this.draggerNode.pos.setX(i.get()),this.cameraNode.pos.setX(i.get())}.bind(this),16);i.set(0,{duration:700,curve:l},function(){f.getClock().clearTimer(n),this.background.scaleBg()}.bind(this))}e.node.remove&&this.numberPad.removeTheDot()}.bind(this)})}function r(t){var e=this.screenSize[0],i=this.draggerNode.pos.getX(),n=i+t.centerDelta.x;this.draggerNode.pos.setX(n),this.cameraNode.pos.setX(n),this.background.blur.opacity.set(n/e),"end"===t.status&&n<175&&a.call(this),n>=175&&(this.padisShowing=!0,this.draggerNode.pos.setX(e,{duration:900,curve:"outElastic"}),this.background.blur.opacity.set(1,{duration:300,curve:"outElastic"}))}function a(){this.draggerNode.pos.setX(0,{duration:900,curve:"outElastic"}),this.cameraNode.pos.setX(0,{duration:900,curve:"outElastic"})}function h(){var t=this.screenSize[0];this.draggerNode.pos.setX(t)}function u(t){new d(t,{content:'ooooo&nbsp;&nbsp;Morgizon&nbsp;&nbsp;<i class="fa fa-rss"></i>',properties:{"font-size":"12px",color:"white"}})}function c(t){new d(t,{content:'100%  [<span style="color:lime">||||</span>]  <i class="fa fa-bolt"></i>',properties:{"font-size":"12px",color:"white"}})}function p(t){new d(t,{classes:["fa","fa-camera"],properties:{"font-size":"12px",color:"white"}})}function l(t){var e=4.70158,i=0;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1),1*Math.pow(2,-15*t)*Math.sin((t-e)*(2*Math.PI)/i)+1)}var d=t("famous/dom-renderables/DOMElement"),f=t("famous/core/FamousEngine"),m=t("famous/components/GestureHandler"),g=t("famous/components/Position"),_=t("famous/transitions/Transitionable"),y=t("famous/components/Camera"),v=t("./DateAndTime"),b=t("./Slider"),T=t("./NumberPad"),E=t("./Modal"),w=t("./Background");new n},{"./Background":61,"./DateAndTime":62,"./Modal":65,"./NumberPad":67,"./Slider":68,"famous/components/Camera":2,"famous/components/GestureHandler":3,"famous/components/Position":5,"famous/core/FamousEngine":12,"famous/dom-renderables/DOMElement":21,"famous/transitions/Transitionable":45}]},{},[70]);
